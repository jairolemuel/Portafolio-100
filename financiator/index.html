<!DOCTYPE html>
<html lang="en">
<head>
Â Â Â Â <meta charset="UTF-8">
Â Â Â Â <title>Financiator Pro - Elite Financial Analytics Suite</title>
Â Â Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â Â Â Â <meta name="description" content="An advanced, enterprise-grade financial calculation and analytics suite for professionals, featuring live data and robust tools.">
Â Â Â Â <meta name="keywords" content="financial calculator, investment, loan, ROI, NPV, IRR, Monte Carlo, crypto, forex, financial analysis, enterprise finance, fintech, monetization">

Â Â Â Â <link rel="icon" href="/path/to/your/favicon.ico" type="image/x-icon">
Â Â Â Â <link rel="apple-touch-icon" href="/path/to/your/apple-touch-icon.png">

Â Â Â Â <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
Â Â Â Â 
Â Â Â Â <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â Â Â Â <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
Â Â Â Â 
Â Â Â Â <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

Â Â Â Â <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>

Â Â Â Â <style>
Â Â Â Â Â Â Â Â /* CSS Variables for theming and consistency */
Â Â Â Â Â Â Â Â :root {
Â Â Â Â Â Â Â Â Â Â Â Â --color-primary: #007BFF; /* Vibrant Blue */
Â Â Â Â Â Â Â Â Â Â Â Â --color-secondary: #6c757d; /* Soft Gray */
Â Â Â Â Â Â Â Â Â Â Â Â --color-accent: #00f2f2; /* Bright Cyan for luxury details */
Â Â Â Â Â Â Â Â Â Â Â Â --color-background-dark: #101828; /* Very dark background for professionalism */
Â Â Â Â Â Â Â Â Â Â Â Â --color-background-light: #1D2B40; /* Slightly lighter panel background */
Â Â Â Â Â Â Â Â Â Â Â Â --color-text-light: #E0E7FF; /* Main text color */
Â Â Â Â Â Â Â Â Â Â Â Â --color-text-secondary: #A9B3C2; /* Secondary text color */
Â Â Â Â Â Â Â Â Â Â Â Â --color-border-subtle: rgba(255, 255, 255, 0.1);
Â Â Â Â Â Â Â Â Â Â Â Â --border-radius-main: 12px;
Â Â Â Â Â Â Â Â Â Â Â Â --box-shadow-deep: 0 8px 24px rgba(0, 0, 0, 0.5);
Â Â Â Â Â Â Â Â Â Â Â Â --transition-speed: 0.3s;
Â Â Â Â Â Â Â Â Â Â Â Â --font-size-base: 16px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Global Reset and Base Styles */
Â Â Â Â Â Â Â Â * {
Â Â Â Â Â Â Â Â Â Â Â Â box-sizing: border-box;
Â Â Â Â Â Â Â Â Â Â Â Â margin: 0;
Â Â Â Â Â Â Â Â Â Â Â Â padding: 0;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â body {
Â Â Â Â Â Â Â Â Â Â Â Â font-family: 'Inter', sans-serif;
Â Â Â Â Â Â Â Â Â Â Â Â background: var(--color-background-dark);
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-light);
Â Â Â Â Â Â Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â Â Â Â Â Â Â flex-direction: column;
Â Â Â Â Â Â Â Â Â Â Â Â min-height: 100vh;
Â Â Â Â Â Â Â Â Â Â Â Â line-height: 1.6;
Â Â Â Â Â Â Â Â Â Â Â Â overflow-x: hidden;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: var(--font-size-base);
Â Â Â Â Â Â Â Â Â Â Â Â -webkit-font-smoothing: antialiased; /* Smoother text rendering */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Custom Scrollbar */
Â Â Â Â Â Â Â Â ::-webkit-scrollbar { width: 8px; }
Â Â Â Â Â Â Â Â ::-webkit-scrollbar-track { background: var(--color-background-light); border-radius: 10px; }
Â Â Â Â Â Â Â Â ::-webkit-scrollbar-thumb { background: var(--color-primary); border-radius: 10px; }
Â Â Â Â Â Â Â Â ::-webkit-scrollbar-thumb:hover { background: var(--color-accent); }

Â Â Â Â Â Â Â Â /* Main Application Container */
Â Â Â Â Â Â Â Â #app-container {
Â Â Â Â Â Â Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â Â Â Â Â Â Â flex-direction: column;
Â Â Â Â Â Â Â Â Â Â Â Â flex: 1;
Â Â Â Â Â Â Â Â Â Â Â Â padding: 25px; /* Increased padding */
Â Â Â Â Â Â Â Â Â Â Â Â max-width: 1300px; /* Wider layout */
Â Â Â Â Â Â Â Â Â Â Â Â margin: 0 auto;
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Header Styling */
Â Â Â Â Â Â Â Â header {
Â Â Â Â Â Â Â Â Â Â Â Â padding: 25px 0;
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â border-bottom: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 40px;
Â Â Â Â Â Â Â Â Â Â Â Â position: relative;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â header h1 {
Â Â Â Â Â Â Â Â Â Â Â Â font-family: 'Rajdhani', sans-serif;
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 700;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 3.5em; /* Larger, more impactful title */
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â text-shadow: 0 0 20px rgba(0, 242, 242, 0.7), 0 0 40px rgba(0, 242, 242, 0.3);
Â Â Â Â Â Â Â Â Â Â Â Â letter-spacing: 2px;
Â Â Â Â Â Â Â Â Â Â Â Â animation: fadeInScale 1.2s ease-out;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â @keyframes fadeInScale {
Â Â Â Â Â Â Â Â Â Â Â Â from { opacity: 0; transform: scale(0.95); }
Â Â Â Â Â Â Â Â Â Â Â Â to { opacity: 1; transform: scale(1); }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Navigation Bar */
Â Â Â Â Â Â Â Â nav {
Â Â Â Â Â Â Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â Â Â Â Â Â Â flex-wrap: wrap;
Â Â Â Â Â Â Â Â Â Â Â Â justify-content: center;
Â Â Â Â Â Â Â Â Â Â Â Â gap: 15px; /* More space between tabs */
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 50px;
Â Â Â Â Â Â Â Â Â Â Â Â background: var(--color-background-light);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: var(--border-radius-main);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: var(--box-shadow-deep);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 12px;
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â nav .tab {
Â Â Â Â Â Â Â Â Â Â Â Â padding: 14px 22px;
Â Â Â Â Â Â Â Â Â Â Â Â cursor: pointer;
Â Â Â Â Â Â Â Â Â Â Â Â border-bottom: 3px solid transparent;
Â Â Â Â Â Â Â Â Â Â Â Â transition: all var(--transition-speed) ease-in-out;
Â Â Â Â Â Â Â Â Â Â Â Â font-family: 'Rajdhani', sans-serif;
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 600;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 1.15em;
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-secondary);
Â Â Â Â Â Â Â Â Â Â Â Â text-transform: uppercase;
Â Â Â Â Â Â Â Â Â Â Â Â letter-spacing: 0.9px;
Â Â Â Â Â Â Â Â Â Â Â Â position: relative;
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden;
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 8px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â nav .tab:before {
Â Â Â Â Â Â Â Â Â Â Â Â content: '';
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â bottom: 0;
Â Â Â Â Â Â Â Â Â Â Â Â left: 0;
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â height: 4px; /* Thicker underline */
Â Â Â Â Â Â Â Â Â Â Â Â background-color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â transform: scaleX(0);
Â Â Â Â Â Â Â Â Â Â Â Â transform-origin: bottom right;
Â Â Â Â Â Â Â Â Â Â Â Â transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smoother animation */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â nav .tab:hover:before {
Â Â Â Â Â Â Â Â Â Â Â Â transform: scaleX(1);
Â Â Â Â Â Â Â Â Â Â Â Â transform-origin: bottom left;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â nav .tab:hover {
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-primary);
Â Â Â Â Â Â Â Â Â Â Â Â text-shadow: 0 0 8px rgba(0, 123, 255, 0.6);
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 123, 255, 0.08); /* Light highlight on hover */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â nav .tab.active {
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-primary);
Â Â Â Â Â Â Â Â Â Â Â Â border-bottom-color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 123, 255, 0.15);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 0 15px rgba(0, 123, 255, 0.4);
Â Â Â Â Â Â Â Â Â Â Â Â border-bottom-left-radius: 0;
Â Â Â Â Â Â Â Â Â Â Â Â border-bottom-right-radius: 0;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â nav .tab.active:before {
Â Â Â Â Â Â Â Â Â Â Â Â transform: scaleX(1);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Calculator Sections */
Â Â Â Â Â Â Â Â .calculator {
Â Â Â Â Â Â Â Â Â Â Â Â display: none;
Â Â Â Â Â Â Â Â Â Â Â Â background: var(--color-background-light);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: var(--border-radius-main);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: var(--box-shadow-deep);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 35px; /* More generous padding */
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 40px;
Â Â Â Â Â Â Â Â Â Â Â Â transition: transform var(--transition-speed) ease-out, opacity var(--transition-speed) ease-out;
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0;
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateY(25px);
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .calculator.active {
Â Â Â Â Â Â Â Â Â Â Â Â display: block;
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 1;
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateY(0);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .calculator h2 {
Â Â Â Â Â Â Â Â Â Â Â Â font-family: 'Rajdhani', sans-serif;
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 700;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 2.5em; /* Larger section titles */
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-primary);
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 30px;
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â position: relative;
Â Â Â Â Â Â Â Â Â Â Â Â padding-bottom: 12px;
Â Â Â Â Â Â Â Â Â Â Â Â text-shadow: 0 0 10px rgba(0, 123, 255, 0.4);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â .calculator h2:after {
Â Â Â Â Â Â Â Â Â Â Â Â content: '';
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â left: 50%;
Â Â Â Â Â Â Â Â Â Â Â Â bottom: 0;
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateX(-50%);
Â Â Â Â Â Â Â Â Â Â Â Â width: 80px; /* Wider underline */
Â Â Â Â Â Â Â Â Â Â Â Â height: 4px;
Â Â Â Â Â Â Â Â Â Â Â Â background: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 2px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Input Group Styling */
Â Â Â Â Â Â Â Â .input-group {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 255, 255, 0.06);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 18px; /* More padding */
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 10px;
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 20px;
Â Â Â Â Â Â Â Â Â Â Â Â transition: background var(--transition-speed), border var(--transition-speed), box-shadow var(--transition-speed);
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid transparent;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
Â Â Â Â Â Â Â Â Â Â Â Â position: relative; /* For error messages */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .input-group:focus-within {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 255, 255, 0.12);
Â Â Â Â Â Â Â Â Â Â Â Â border-color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4), 0 0 10px rgba(0, 242, 242, 0.3);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â label {
Â Â Â Â Â Â Â Â Â Â Â Â display: block;
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 8px;
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-secondary);
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.98rem;
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 500;
Â Â Â Â Â Â Â Â Â Â Â Â letter-spacing: 0.6px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â input, select, textarea {
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â padding: 14px; /* Larger padding */
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 1.1rem;
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 8px;
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid rgba(255, 255, 255, 0.2);
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 0, 0, 0.4); /* Darker input background */
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-light);
Â Â Â Â Â Â Â Â Â Â Â Â transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
Â Â Â Â Â Â Â Â Â Â Â Â -webkit-appearance: none;
Â Â Â Â Â Â Â Â Â Â Â Â appearance: none;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â input:focus, select:focus, textarea:focus {
Â Â Â Â Â Â Â Â Â Â Â Â border-color: var(--color-primary);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.5);
Â Â Â Â Â Â Â Â Â Â Â Â outline: none;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â select {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 0, 0, 0.4) url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%204%205%22%3E%3Cpath%20fill%3D%22%23E0E7FF%22%20d%3D%22M2%200L0%202h4zm0%205L0%203h4z%22%2F%3E%3C%2Fsvg%3E') no-repeat right 15px center;
Â Â Â Â Â Â Â Â Â Â Â Â background-size: 10px 12px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â textarea {
Â Â Â Â Â Â Â Â Â Â Â Â resize: vertical;
Â Â Â Â Â Â Â Â Â Â Â Â min-height: 70px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .input-error-message {
Â Â Â Â Â Â Â Â Â Â Â Â color: #ff6347; /* Tomato red */
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.85em;
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: 5px;
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â bottom: -20px; /* Position below input group */
Â Â Â Â Â Â Â Â Â Â Â Â left: 18px;
Â Â Â Â Â Â Â Â Â Â Â Â animation: fadeIn 0.3s ease-out;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Button Styling */
Â Â Â Â Â Â Â Â button {
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â padding: 16px; /* Larger padding */
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 1.25rem;
Â Â Â Â Â Â Â Â Â Â Â Â border: none;
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 8px;
Â Â Â Â Â Â Â Â Â Â Â Â background: linear-gradient(45deg, var(--color-primary), #0056b3);
Â Â Â Â Â Â Â Â Â Â Â Â color: white;
Â Â Â Â Â Â Â Â Â Â Â Â cursor: pointer;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 6px 18px rgba(0, 123, 255, 0.5);
Â Â Â Â Â Â Â Â Â Â Â Â transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 700;
Â Â Â Â Â Â Â Â Â Â Â Â text-transform: uppercase;
Â Â Â Â Â Â Â Â Â Â Â Â letter-spacing: 1.2px;
Â Â Â Â Â Â Â Â Â Â Â Â position: relative;
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden;
Â Â Â Â Â Â Â Â Â Â Â Â z-index: 1;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â button:before {
Â Â Â Â Â Â Â Â Â Â Â Â content: '';
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â top: 50%;
Â Â Â Â Â Â Â Â Â Â Â Â left: 50%;
Â Â Â Â Â Â Â Â Â Â Â Â width: 350%; /* Larger burst */
Â Â Â Â Â Â Â Â Â Â Â Â height: 350%;
Â Â Â Â Â Â Â Â Â Â Â Â background-color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 50%;
Â Â Â Â Â Â Â Â Â Â Â Â transition: all 0.5s ease-out;
Â Â Â Â Â Â Â Â Â Â Â Â transform: translate(-50%, -50%) scale(0);
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0;
Â Â Â Â Â Â Â Â Â Â Â Â z-index: -1;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â button:hover:before {
Â Â Â Â Â Â Â Â Â Â Â Â transform: translate(-50%, -50%) scale(1);
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0.18; /* More visible burst */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â button:hover {
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateY(-5px);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 10px 25px rgba(0, 123, 255, 0.7);
Â Â Â Â Â Â Â Â Â Â Â Â background: linear-gradient(45deg, #0056b3, var(--color-primary));
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â button:active {
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateY(-2px) scale(0.99);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 4px 12px rgba(0, 123, 255, 0.4);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â button:disabled {
Â Â Â Â Â Â Â Â Â Â Â Â background: #4a4a4a;
Â Â Â Â Â Â Â Â Â Â Â Â cursor: not-allowed;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: none;
Â Â Â Â Â Â Â Â Â Â Â Â transform: none;
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0.6;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â button:disabled:before {
Â Â Â Â Â Â Â Â Â Â Â Â transform: translate(-50%, -50%) scale(0);
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Result Display */
Â Â Â Â Â Â Â Â .result {
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: 25px;
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 600;
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 1.4em;
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 242, 242, 0.12);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 18px;
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 10px;
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid rgba(0, 242, 242, 0.4);
Â Â Â Â Â Â Â Â Â Â Â Â animation: fadeIn 0.6s ease-out;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 20px rgba(0, 242, 242, 0.3);
Â Â Â Â Â Â Â Â Â Â Â Â position: relative;
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â .result.error {
Â Â Â Â Â Â Â Â Â Â Â Â color: #ff6347;
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 99, 71, 0.15);
Â Â Â Â Â Â Â Â Â Â Â Â border-color: rgba(255, 99, 71, 0.5);
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 20px rgba(255, 99, 71, 0.3);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â .result:after {
Â Â Â Â Â Â Â Â Â Â Â Â content: '';
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â top: 0;
Â Â Â Â Â Â Â Â Â Â Â Â left: 0;
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â height: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 0 12px var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 10px;
Â Â Â Â Â Â Â Â Â Â Â Â pointer-events: none;
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0.7;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â .result.error:after {
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 0 12px #ff6347;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â @keyframes fadeIn {
Â Â Â Â Â Â Â Â Â Â Â Â from { opacity: 0; transform: translateY(15px); }
Â Â Â Â Â Â Â Â Â Â Â Â to { opacity: 1; transform: translateY(0); }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Table Styling */
Â Â Â Â Â Â Â Â table {
Â Â Â Â Â Â Â Â Â Â Â Â width: 100%;
Â Â Â Â Â Â Â Â Â Â Â Â border-collapse: collapse;
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: 25px;
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 255, 255, 0.04);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: var(--border-radius-main);
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 0 20px rgba(0,0,0,0.4);
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â th, td {
Â Â Â Â Â Â Â Â Â Â Â Â padding: 14px; /* More padding */
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid rgba(255, 255, 255, 0.1);
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.98em;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â th {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 123, 255, 0.25);
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-primary);
Â Â Â Â Â Â Â Â Â Â Â Â font-weight: 700;
Â Â Â Â Â Â Â Â Â Â Â Â text-transform: uppercase;
Â Â Â Â Â Â Â Â Â Â Â Â font-family: 'Rajdhani', sans-serif;
Â Â Â Â Â Â Â Â Â Â Â Â letter-spacing: 0.8px;
Â Â Â Â Â Â Â Â Â Â Â Â position: sticky;
Â Â Â Â Â Â Â Â Â Â Â Â top: 0; /* Sticky headers for scrollable tables */
Â Â Â Â Â Â Â Â Â Â Â Â z-index: 2;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â tr:nth-child(even) {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 255, 255, 0.015);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â tr:hover {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(255, 255, 255, 0.07);
Â Â Â Â Â Â Â Â Â Â Â Â transition: background 0.2s ease-in-out;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Chart Styling */
Â Â Â Â Â Â Â Â canvas {
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 0, 0, 0.25);
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: var(--border-radius-main);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 20px; /* More padding around charts */
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: 30px;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Footer Styling */
Â Â Â Â Â Â Â Â footer {
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â padding: 25px;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.95rem;
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-secondary);
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: 50px;
Â Â Â Â Â Â Â Â Â Â Â Â border-top: 1px solid var(--color-border-subtle);
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0,0,0,0.1);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Background Animation */
Â Â Â Â Â Â Â Â .bg-anim {
Â Â Â Â Â Â Â Â Â Â Â Â position: fixed;
Â Â Â Â Â Â Â Â Â Â Â Â top: 0;
Â Â Â Â Â Â Â Â Â Â Â Â left: 0;
Â Â Â Â Â Â Â Â Â Â Â Â right: 0;
Â Â Â Â Â Â Â Â Â Â Â Â bottom: 0;
Â Â Â Â Â Â Â Â Â Â Â Â z-index: -1;
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden;
Â Â Â Â Â Â Â Â Â Â Â Â pointer-events: none;
Â Â Â Â Â Â Â Â Â Â Â Â filter: blur(3px); /* Slightly more blur */
Â Â Â Â Â Â Â Â Â Â Â Â opacity: 0.7; /* More subtle */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .bg-anim div {
Â Â Â Â Â Â Â Â Â Â Â Â position: absolute;
Â Â Â Â Â Â Â Â Â Â Â Â width: 280px; /* Larger spheres */
Â Â Â Â Â Â Â Â Â Â Â Â height: 280px;
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 242, 242, 0.04); /* Subtle cyan glow */
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: 50%;
Â Â Â Â Â Â Â Â Â Â Â Â animation: float 50s linear infinite alternate; /* Slower, longer animation */
Â Â Â Â Â Â Â Â Â Â Â Â will-change: transform, opacity;
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 50px rgba(0, 242, 242, 0.2); /* Subtle glow effect */
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â .bg-anim div:nth-child(1) { top: 75%; left: -15%; animation-duration: 45s; animation-delay: 0s; transform: scale(1.1); --dx: 40px; --dy: -50px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(2) { top: 15%; left: 85%; animation-duration: 50s; animation-delay: 5s; transform: scale(0.9); --dx: -35px; --dy: 45px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(3) { top: -25%; left: 35%; animation-duration: 40s; animation-delay: 10s; transform: scale(1.2); --dx: 50px; --dy: 30px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(4) { top: 45%; left: -25%; animation-duration: 55s; animation-delay: 15s; transform: scale(0.8); --dx: -40px; --dy: -40px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(5) { top: 95%; left: 70%; animation-duration: 60s; animation-delay: 20s; transform: scale(1.3); --dx: 30px; --dy: 60px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(6) { top: 0%; left: 10%; animation-duration: 38s; animation-delay: 25s; transform: scale(1.05); --dx: -20px; --dy: 25px; }
Â Â Â Â Â Â Â Â .bg-anim div:nth-child(7) { top: 60%; left: 100%; animation-duration: 42s; animation-delay: 30s; transform: scale(0.95); --dx: -50px; --dy: -30px; }


Â Â Â Â Â Â Â Â @keyframes float {
Â Â Â Â Â Â Â Â Â Â Â Â 0% { transform: translate(0, 0) scale(var(--s, 1)) rotate(0deg); }
Â Â Â Â Â Â Â Â Â Â Â Â 50% { transform: translate(var(--dx, 20px), var(--dy, -20px)) scale(calc(var(--s, 1) * 1.05)) rotate(180deg); }
Â Â Â Â Â Â Â Â Â Â Â Â 100% { transform: translate(0, 0) scale(var(--s, 1)) rotate(360deg); }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Ad Slot Styling */
Â Â Â Â Â Â Â Â .ad-slot {
Â Â Â Â Â Â Â Â Â Â Â Â margin: 30px auto;
Â Â Â Â Â Â Â Â Â Â Â Â background: rgba(0, 0, 0, 0.5);
Â Â Â Â Â Â Â Â Â Â Â Â border: 1px dashed var(--color-accent);
Â Â Â Â Â Â Â Â Â Â Â Â padding: 15px;
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-secondary);
Â Â Â Â Â Â Â Â Â Â Â Â font-style: italic;
Â Â Â Â Â Â Â Â Â Â Â Â border-radius: var(--border-radius-main);
Â Â Â Â Â Â Â Â Â Â Â Â max-width: 728px; /* Common ad unit size */
Â Â Â Â Â Â Â Â Â Â Â Â height: 90px; /* Typical banner height */
Â Â Â Â Â Â Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â Â Â Â Â Â Â align-items: center;
Â Â Â Â Â Â Â Â Â Â Â Â justify-content: center;
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.9em;
Â Â Â Â Â Â Â Â Â Â Â Â overflow: hidden; /* To contain actual ad content */
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 15px rgba(0, 242, 242, 0.2);
Â Â Â Â Â Â Â Â Â Â Â Â transition: all 0.3s ease-out;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â .ad-slot:hover {
Â Â Â Â Â Â Â Â Â Â Â Â box-shadow: 0 0 25px rgba(0, 242, 242, 0.4);
Â Â Â Â Â Â Â Â Â Â Â Â transform: translateY(-2px);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â /* Specific ad sizes if needed */
Â Â Â Â Â Â Â Â .ad-slot.square { width: 300px; height: 250px; }
Â Â Â Â Â Â Â Â .ad-slot.leaderboard { width: 728px; height: 90px; }

Â Â Â Â Â Â Â Â /* Small text for explanations */
Â Â Â Â Â Â Â Â .small-text {
Â Â Â Â Â Â Â Â Â Â Â Â color: var(--color-text-secondary);
Â Â Â Â Â Â Â Â Â Â Â Â font-size: 0.88em;
Â Â Â Â Â Â Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â Â Â Â Â Â Â margin-top: -10px;
Â Â Â Â Â Â Â Â Â Â Â Â margin-bottom: 15px;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â /* Media Queries for Responsiveness */
Â Â Â Â Â Â Â Â @media (max-width: 1024px) {
Â Â Â Â Â Â Â Â Â Â Â Â #app-container { padding: 20px; }
Â Â Â Â Â Â Â Â Â Â Â Â header h1 { font-size: 3em; }
Â Â Â Â Â Â Â Â Â Â Â Â nav { gap: 10px; padding: 10px; }
Â Â Â Â Â Â Â Â Â Â Â Â nav .tab { padding: 12px 18px; font-size: 1.05em; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator { padding: 30px; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator h2 { font-size: 2.2em; }
Â Â Â Â Â Â Â Â Â Â Â Â .input-group { padding: 15px; }
Â Â Â Â Â Â Â Â Â Â Â Â input, select, textarea { padding: 12px; font-size: 1.05rem; }
Â Â Â Â Â Â Â Â Â Â Â Â button { padding: 14px; font-size: 1.15rem; }
Â Â Â Â Â Â Â Â Â Â Â Â .result { font-size: 1.2em; padding: 15px; }
Â Â Â Â Â Â Â Â Â Â Â Â th, td { padding: 12px; font-size: 0.95em; }
Â Â Â Â Â Â Â Â Â Â Â Â .ad-slot.leaderboard { max-width: 468px; height: 60px; }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â @media (max-width: 768px) {
Â Â Â Â Â Â Â Â Â Â Â Â header h1 { font-size: 2.5em; }
Â Â Â Â Â Â Â Â Â Â Â Â nav { flex-direction: column; gap: 8px; }
Â Â Â Â Â Â Â Â Â Â Â Â nav .tab { padding: 10px 15px; font-size: 1em; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator { padding: 25px; margin-bottom: 30px; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator h2 { font-size: 2em; }
Â Â Â Â Â Â Â Â Â Â Â Â .input-group { padding: 12px; margin-bottom: 18px; }
Â Â Â Â Â Â Â Â Â Â Â Â input, select, textarea { padding: 10px; font-size: 1em; }
Â Â Â Â Â Â Â Â Â Â Â Â button { padding: 12px; font-size: 1.05rem; }
Â Â Â Â Â Â Â Â Â Â Â Â .result { font-size: 1.1em; padding: 12px; }
Â Â Â Â Â Â Â Â Â Â Â Â th, td { padding: 10px; font-size: 0.9em; }
Â Â Â Â Â Â Â Â Â Â Â Â .ad-slot { max-width: 320px; height: 50px; }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â @media (max-width: 480px) {
Â Â Â Â Â Â Â Â Â Â Â Â #app-container { padding: 15px; }
Â Â Â Â Â Â Â Â Â Â Â Â header h1 { font-size: 2em; letter-spacing: 1px; }
Â Â Â Â Â Â Â Â Â Â Â Â nav { padding: 8px; }
Â Â Â Â Â Â Â Â Â Â Â Â nav .tab { padding: 8px 12px; font-size: 0.9em; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator { padding: 18px; margin-bottom: 25px; }
Â Â Â Â Â Â Â Â Â Â Â Â .calculator h2 { font-size: 1.8em; }
Â Â Â Â Â Â Â Â Â Â Â Â .input-group { padding: 10px; margin-bottom: 15px; }
Â Â Â Â Â Â Â Â Â Â Â Â input, select, textarea { padding: 8px; font-size: 0.95em; }
Â Â Â Â Â Â Â Â Â Â Â Â button { padding: 10px; font-size: 1rem; }
Â Â Â Â Â Â Â Â Â Â Â Â .result { font-size: 1em; padding: 10px; }
Â Â Â Â Â Â Â Â Â Â Â Â th, td { padding: 8px; font-size: 0.8em; }
Â Â Â Â Â Â Â Â Â Â Â Â .ad-slot { margin: 20px auto; width: 100%; max-width: 300px; height: 50px; }
Â Â Â Â Â Â Â Â }
Â Â Â Â </style>
</head>
<body>
Â Â Â Â <div class="bg-anim">
Â Â Â Â Â Â Â Â <div></div><div></div><div></div><div></div><div></div><div></div><div></div>
Â Â Â Â </div>

Â Â Â Â <div id="app-container">
Â Â Â Â Â Â Â Â <header>
Â Â Â Â Â Â Â Â Â Â Â Â <h1>Financiator Pro</h1>
Â Â Â Â Â Â Â Â </header>

Â Â Â Â Â Â Â Â <nav>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab active" data-target="compound">Compound Interest</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="loan">Loan Payment</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="custom">Custom Expression</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="roi">ROI</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="npv">NPV & IRR</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="amort">Amortization</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="stats">Statistics & Chart</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="crypto">Crypto (Live)</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="fx">Currency Converter</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="wasm">WASM Demo</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="sim">Monte Carlo Sim.</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="tab" data-target="premium">Premium Features</div> </nav>

Â Â Â Â Â Â Â Â <main class="content">
Â Â Â Â Â Â Â Â Â Â Â Â <div class="ad-slot leaderboard" id="ad-top-banner">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p>Advertisement Space - FinTech Services / Investment Opportunities</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator active" id="compound" data-calculator-id="compound">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Compound Interest</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="cc-principal">Initial Principal ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="cc-principal" placeholder="e.g., 10000" value="10000" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="cc-principal-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="cc-rate">Annual Rate (%)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="cc-rate" placeholder="e.g., 5" value="5" min="0" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="cc-rate-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="cc-years">Years</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="cc-years" placeholder="e.g., 10" value="10" min="1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="cc-years-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="cc-frequency">Compounding Frequency</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <select id="cc-frequency">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="1">Annually</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="2">Semi-annually</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="4">Quarterly</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="12" selected>Monthly</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="365">Daily</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcCompound()">Calculate Compound Interest</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="cc-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="loan" data-calculator-id="loan">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Monthly Loan Payment</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="loan-amount">Loan Amount ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="loan-amount" placeholder="e.g., 100000" value="100000" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="loan-amount-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="loan-rate">Annual Rate (%)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="loan-rate" placeholder="e.g., 6" value="6" min="0" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="loan-rate-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="loan-years">Term (Years)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="loan-years" placeholder="e.g., 5" value="5" min="1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="loan-years-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcLoan()">Calculate Monthly Payment</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="loan-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="custom" data-calculator-id="custom">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Evaluate Custom Mathematical Expression</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="custom-expression">Enter your formula:</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="text" id="custom-expression" placeholder="e.g., (1000 + 50) * 1.25 + Math.sqrt(144)" value="(1000 + 50) * 1.25 + Math.sqrt(144)">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="custom-expression-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">You can use `Math.pow()`, `Math.sqrt()`, `Math.log()`, `+`, `-`, `*`, `/`, `()` etc.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcCustom()">Evaluate Expression</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="custom-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="roi" data-calculator-id="roi">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Return on Investment (ROI)</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="roi-invest">Initial Investment ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="roi-invest" placeholder="e.g., 10000" value="10000" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="roi-invest-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="roi-gain">Net Profit/Loss ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="roi-gain" placeholder="e.g., 2000" value="2000">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="roi-gain-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcROI()">Calculate ROI</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="roi-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="npv" data-calculator-id="npv">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Net Present Value (NPV) & Internal Rate of Return (IRR)</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Analyze project profitability and efficiency.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="npv-initial-investment">Initial Investment (CF0) ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="npv-initial-investment" placeholder="e.g., -100000" value="-100000" step="any">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="npv-initial-investment-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="npv-cash-flows">Annual Cash Flows (comma-separated, e.g., 30000, 40000, 50000)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <textarea id="npv-cash-flows" rows="3" placeholder="e.g., 30000, 40000, 50000, 20000">30000, 40000, 50000, 20000</textarea>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="npv-cash-flows-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="npv-discount-rate">Annual Discount Rate (%)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="npv-discount-rate" placeholder="e.g., 10" value="10" min="0" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="npv-discount-rate-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcNPV_IRR()">Calculate NPV & IRR</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="npv-irr-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="npv-chart"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="amort" data-calculator-id="amort">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Loan Amortization Schedule</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Detailed breakdown of principal and interest payments over time.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="am-amount">Loan Amount ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="am-amount" placeholder="e.g., 50000" value="50000" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="am-amount-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="am-rate">Annual Rate (%)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="am-rate" placeholder="e.g., 5" value="5" min="0" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="am-rate-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="am-years">Term (Years)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="am-years" placeholder="e.g., 3" value="3" min="1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="am-years-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="genAmort()">Generate Amortization Table</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="amort-table-container" style="max-height: 400px; overflow-y: auto; margin-top: 25px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="amort-table"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="amort-chart"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="stats" data-calculator-id="stats">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Statistical Analysis & Data Visualization</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Understand your financial data distribution.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="stats-labels">Category Labels (comma-separated, e.g., Income, Fixed Costs, Investments)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <textarea id="stats-labels" rows="2" placeholder="e.g., Income, Fixed Costs, Investments, Savings">Income, Fixed Costs, Investments, Savings</textarea>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="stats-labels-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="stats-values">Numerical Values (comma-separated, e.g., 5000, 2500, 1000, 1500)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <textarea id="stats-values" rows="2" placeholder="e.g., 5000, 2500, 1000, 1500">5000, 2500, 1000, 1500</textarea>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="stats-values-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="stats-chart-type">Chart Type</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <select id="stats-chart-type">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="pie">Pie Chart</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="bar">Bar Chart</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="doughnut">Doughnut Chart</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="drawStats()">Generate Analysis & Chart</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="stats-summary"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="stats-chart"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="crypto" data-calculator-id="crypto">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Live Cryptocurrency Prices</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Powered by CoinGecko API.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="fetchCrypto()">Load Live Crypto Data</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="crypto-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="crypto-chart"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="fx" data-calculator-id="fx">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Advanced Currency Converter</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Real-time exchange rates (Powered by exchangerate.host).</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="fx-amount">Amount</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="fx-amount" value="100" min="0" step="any">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="fx-amount-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="fx-from">Convert From</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <select id="fx-from">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="USD">USD - United States Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="EUR">EUR - Euro</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="GBP">GBP - British Pound</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="JPY">JPY - Japanese Yen</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CAD">CAD - Canadian Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="AUD">AUD - Australian Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CHF">CHF - Swiss Franc</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CNY">CNY - Chinese Yuan</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="BRL">BRL - Brazilian Real</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="ARS" selected>ARS - Argentine Peso</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="fx-to">Convert To</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <select id="fx-to">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="USD" selected>USD - United States Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="EUR">EUR - Euro</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="GBP">GBP - British Pound</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="JPY">JPY - Japanese Yen</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CAD">CAD - Canadian Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="AUD">AUD - Australian Dollar</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CHF">CHF - Swiss Franc</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="CNY">CNY - Chinese Yuan</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="BRL">BRL - Brazilian Real</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <option value="ARS">ARS - Argentine Peso</option>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="convertFX()">Convert Currency</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="fx-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="wasm" data-calculator-id="wasm">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>WebAssembly (WASM) Calculation Demo</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Demonstrates near-native performance for intensive numerical operations.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="wasm-base">Base Number</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="wasm-base" value="2" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="wasm-base-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="wasm-exp">Exponent</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="wasm-exp" value="30" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="wasm-exp-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="calcWasm()">Calculate Power (via WASM)</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="wasm-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="sim" data-calculator-id="sim">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Monte Carlo Portfolio Simulation</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Estimate future investment performance under various risk scenarios.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="sim-initial-capital">Initial Capital ($)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="sim-initial-capital" placeholder="e.g., 100000" value="100000" min="0">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="sim-initial-capital-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="sim-avg-return">Annual Avg. Return (%)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="sim-avg-return" placeholder="e.g., 8" value="8" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="sim-avg-return-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="sim-std-dev">Annual Std. Deviation (%) (Volatility)</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="sim-std-dev" placeholder="e.g., 15" value="15" step="0.1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="sim-std-dev-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="sim-years">Simulation Years</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="sim-years" placeholder="e.g., 20" value="20" min="1">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="sim-years-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-group">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <label for="sim-runs">Number of Simulations</label>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="sim-runs" placeholder="e.g., 1000" value="1000" min="100" max="10000" step="100">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="input-error-message" id="sim-runs-error"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="runMonteCarlo()">Execute Monte Carlo Simulation</button>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="result" id="sim-result"></div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <canvas id="sim-chart"></canvas>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <section class="calculator" id="premium" data-calculator-id="premium">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h2>Unlock Premium Financial Tools</h2>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p class="small-text">Upgrade your experience for advanced insights and exclusive features.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <ul style="list-style: none; padding: 0; margin-top: 25px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <li style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--color-primary); display: flex; align-items: center;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size: 1.5em; margin-right: 15px; color: var(--color-accent);">ðŸ“ˆ</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <strong>Advanced Reporting & Export:</strong> Generate detailed PDF/Excel reports of all calculations, amortization schedules, and simulation results.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <li style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--color-primary); display: flex; align-items: center;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size: 1.5em; margin-right: 15px; color: var(--color-accent);">ðŸ’¾</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <strong>Save & Load Scenarios:</strong> Store multiple calculation scenarios and portfolio simulations in your secure cloud profile for future reference.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <li style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--color-primary); display: flex; align-items: center;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size: 1.5em; margin-right: 15px; color: var(--color-accent);">ðŸ“Š</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <strong>Customizable Dashboards:</strong> Create personalized financial dashboards with key metrics from your calculations.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <li style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--color-primary); display: flex; align-items: center;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size: 1.5em; margin-right: 15px; color: var(--color-accent);">ðŸ”’</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <strong>Ad-Free Experience:</strong> Enjoy uninterrupted financial analysis without advertisements.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <li style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--color-primary); display: flex; align-items: center;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size: 1.5em; margin-right: 15px; color: var(--color-accent);">ðŸ“ž</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <strong>Priority Support:</strong> Direct access to our expert support team for any queries or technical assistance.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </li>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </ul>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="redirectToSubscription()">View Premium Plans</button>
Â Â Â Â Â Â Â Â Â Â Â Â </section>

Â Â Â Â Â Â Â Â Â Â Â Â <div class="ad-slot leaderboard" id="ad-bottom-banner">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p>Advertisement Space - Financial Software / Consulting</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>

Â Â Â Â Â Â Â Â </main>

Â Â Â Â Â Â Â Â <footer>
Â Â Â Â Â Â Â Â Â Â Â Â &copy; 2025 Financiator Pro â€“ Powered by cutting-edge financial analytics.
Â Â Â Â Â Â Â Â Â Â Â Â <div class="small-text" style="margin-top: 10px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Proudly serving professionals globally. Data accuracy and security are our top priorities.
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â </footer>
Â Â Â Â </div>

Â Â Â Â <script>
Â Â Â Â Â Â Â Â // Register Chart.js Datalabels Plugin globally
Â Â Â Â Â Â Â Â Chart.register(ChartDataLabels);

Â Â Â Â Â Â Â Â // --- Data Engineering & DOM Management ---
Â Â Â Â Â Â Â Â const DOM = {
Â Â Â Â Â Â Â Â Â Â Â Â tabs: document.querySelectorAll('.tab'),
Â Â Â Â Â Â Â Â Â Â Â Â calculators: document.querySelectorAll('.calculator'),
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â // Centralized error message elements
Â Â Â Â Â Â Â Â Â Â Â Â errorMessages: {},

Â Â Â Â Â Â Â Â Â Â Â Â // Input and result elements
Â Â Â Â Â Â Â Â Â Â Â Â // Each input is associated with its error message div
Â Â Â Â Â Â Â Â Â Â Â Â inputs: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ccPrincipal: { element: document.getElementById('cc-principal'), error: document.getElementById('cc-principal-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ccRate: { element: document.getElementById('cc-rate'), error: document.getElementById('cc-rate-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ccYears: { element: document.getElementById('cc-years'), error: document.getElementById('cc-years-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ccFrequency: { element: document.getElementById('cc-frequency') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ccResult: { element: document.getElementById('cc-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loanAmount: { element: document.getElementById('loan-amount'), error: document.getElementById('loan-amount-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loanRate: { element: document.getElementById('loan-rate'), error: document.getElementById('loan-rate-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loanYears: { element: document.getElementById('loan-years'), error: document.getElementById('loan-years-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loanResult: { element: document.getElementById('loan-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â customExpression: { element: document.getElementById('custom-expression'), error: document.getElementById('custom-expression-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â customResult: { element: document.getElementById('custom-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â roiInvest: { element: document.getElementById('roi-invest'), error: document.getElementById('roi-invest-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â roiGain: { element: document.getElementById('roi-gain'), error: document.getElementById('roi-gain-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â roiResult: { element: document.getElementById('roi-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â npvInitialInvestment: { element: document.getElementById('npv-initial-investment'), error: document.getElementById('npv-initial-investment-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â npvCashFlows: { element: document.getElementById('npv-cash-flows'), error: document.getElementById('npv-cash-flows-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â npvDiscountRate: { element: document.getElementById('npv-discount-rate'), error: document.getElementById('npv-discount-rate-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â npvIrrResult: { element: document.getElementById('npv-irr-result') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â npvChartCtx: document.getElementById('npv-chart').getContext('2d'),

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â amAmount: { element: document.getElementById('am-amount'), error: document.getElementById('am-amount-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â amRate: { element: document.getElementById('am-rate'), error: document.getElementById('am-rate-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â amYears: { element: document.getElementById('am-years'), error: document.getElementById('am-years-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â amortTable: { element: document.getElementById('amort-table') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â amortChartCtx: document.getElementById('amort-chart').getContext('2d'),

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â statsLabels: { element: document.getElementById('stats-labels'), error: document.getElementById('stats-labels-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â statsValues: { element: document.getElementById('stats-values'), error: document.getElementById('stats-values-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â statsChartType: { element: document.getElementById('stats-chart-type') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â statsSummary: { element: document.getElementById('stats-summary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â statsChartCtx: document.getElementById('stats-chart').getContext('2d'),

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cryptoResult: { element: document.getElementById('crypto-result') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cryptoChartCtx: document.getElementById('crypto-chart').getContext('2d'),

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fxAmount: { element: document.getElementById('fx-amount'), error: document.getElementById('fx-amount-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fxFrom: { element: document.getElementById('fx-from') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fxTo: { element: document.getElementById('fx-to') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fxResult: { element: document.getElementById('fx-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â wasmBase: { element: document.getElementById('wasm-base'), error: document.getElementById('wasm-base-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â wasmExp: { element: document.getElementById('wasm-exp'), error: document.getElementById('wasm-exp-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â wasmResult: { element: document.getElementById('wasm-result') },

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simInitialCapital: { element: document.getElementById('sim-initial-capital'), error: document.getElementById('sim-initial-capital-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simAvgReturn: { element: document.getElementById('sim-avg-return'), error: document.getElementById('sim-avg-return-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simStdDev: { element: document.getElementById('sim-std-dev'), error: document.getElementById('sim-std-dev-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simYears: { element: document.getElementById('sim-years'), error: document.getElementById('sim-years-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simRuns: { element: document.getElementById('sim-runs'), error: document.getElementById('sim-runs-error') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simResult: { element: document.getElementById('sim-result') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simChartCtx: document.getElementById('sim-chart').getContext('2d'),
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â let currentCharts = {}; // Stores Chart.js instances for proper destruction

Â Â Â Â Â Â Â Â // --- General Utilities ---

Â Â Â Â Â Â Â Â // Helper to get CSS variable values
Â Â Â Â Â Â Â Â const varStyle = (name) => getComputedStyle(document.documentElement).getPropertyValue(name);

Â Â Â Â Â Â Â Â // Formats currency consistently
Â Â Â Â Â Â Â Â const formatCurrency = (value, currency = 'USD') => {
Â Â Â Â Â Â Â Â Â Â Â Â return new Intl.NumberFormat('en-US', {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â style: 'currency',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currency: currency,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumFractionDigits: 2,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â maximumFractionDigits: 2
Â Â Â Â Â Â Â Â Â Â Â Â }).format(value);
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â // Formats percentages consistently
Â Â Â Â Â Â Â Â const formatPercentage = (value) => {
Â Â Â Â Â Â Â Â Â Â Â Â return new Intl.NumberFormat('en-US', {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â style: 'percent',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumFractionDigits: 1,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â maximumFractionDigits: 2
Â Â Â Â Â Â Â Â Â Â Â Â }).format(value / 100);
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â // Displays results or errors, with animation
Â Â Â Â Â Â Â Â const displayResult = (element, message, isError = false) => {
Â Â Â Â Â Â Â Â Â Â Â Â element.classList.remove('error');
Â Â Â Â Â Â Â Â Â Â Â Â element.classList.toggle('error', isError);
Â Â Â Â Â Â Â Â Â Â Â Â element.innerHTML = message; // Use innerHTML for potential line breaks or bolding
Â Â Â Â Â Â Â Â Â Â Â Â element.style.animation = 'none'; // Reset animation
Â Â Â Â Â Â Â Â Â Â Â Â void element.offsetWidth; // Trigger reflow
Â Â Â Â Â Â Â Â Â Â Â Â element.style.animation = 'fadeIn 0.6s ease-out';
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â // Input Validation with error message display
Â Â Â Â Â Â Â Â const validateInput = (inputObj, min, max = Infinity, errorMessage) => {
Â Â Â Â Â Â Â Â Â Â Â Â const element = inputObj.element;
Â Â Â Â Â Â Â Â Â Â Â Â const errorDiv = inputObj.error;
Â Â Â Â Â Â Â Â Â Â Â Â const value = parseFloat(element.value);

Â Â Â Â Â Â Â Â Â Â Â Â if (isNaN(value) || value < min || value > max) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â element.style.borderColor = '#ff6347'; // Red border for error
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (errorDiv) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â errorDiv.textContent = errorMessage;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return null;
Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â element.style.borderColor = ''; // Reset border
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (errorDiv) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â errorDiv.textContent = ''; // Clear error message
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return value;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â // --- Navigation & UI Handlers ---

Â Â Â Â Â Â Â Â DOM.tabs.forEach(tab => {
Â Â Â Â Â Â Â Â Â Â Â Â tab.addEventListener('click', () => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Remove active class from all tabs and calculators
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â DOM.tabs.forEach(t => t.classList.remove('active'));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â DOM.calculators.forEach(s => s.classList.remove('active'));

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Add active class to clicked tab and its target calculator
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tab.classList.add('active');
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â document.getElementById(tab.dataset.target).classList.add('active');

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Destroy all existing Chart.js instances to prevent conflicts/memory leaks
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â for (const chartId in currentCharts) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (currentCharts[chartId]) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentCharts[chartId].destroy();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentCharts[chartId] = null;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // If ads are integrated, ensure they are re-initialized or refreshed
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // refreshAds(); // Call a function to refresh ads if using a dynamic ad platform
Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â });

Â Â Â Â Â Â Â Â // Placeholder for ad refresh logic (would interact with ad network SDK)
Â Â Â Â Â Â Â Â const refreshAds = () => {
Â Â Â Â Â Â Â Â Â Â Â Â console.log('Refreshing ads...');
Â Â Â Â Â Â Â Â Â Â Â Â // In a real scenario, this would trigger calls to the ad network's API
Â Â Â Â Â Â Â Â Â Â Â Â // For AdSense, it might involve pushing commands to `adsbygoogle` array
Â Â Â Â Â Â Â Â Â Â Â Â // (window.adsbygoogle = window.adsbygoogle || []).push({});
Â Â Â Â Â Â Â Â Â Â Â Â // Or re-initializing ad units in specific divs.
Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â // --- Calculator Logic ---

Â Â Â Â Â Â Â Â // 1. Compound Interest
Â Â Â Â Â Â Â Â function calcCompound() {
Â Â Â Â Â Â Â Â Â Â Â Â const P = validateInput(DOM.inputs.ccPrincipal, 0, Infinity, 'Enter a non-negative principal.');
Â Â Â Â Â Â Â Â Â Â Â Â const r_annual = validateInput(DOM.inputs.ccRate, 0, Infinity, 'Enter a non-negative annual rate.') / 100;
Â Â Â Â Â Â Â Â Â Â Â Â const t = validateInput(DOM.inputs.ccYears, 1, Infinity, 'Enter at least 1 year.');
Â Â Â Â Â Â Â Â Â Â Â Â const n = parseInt(DOM.inputs.ccFrequency.element.value);

Â Â Â Â Â Â Â Â Â Â Â Â if (P === null || r_annual === null || t === null || isNaN(n)) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.ccResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const r_period = r_annual / n;
Â Â Â Â Â Â Â Â Â Â Â Â const total_periods = t * n;

Â Â Â Â Â Â Â Â Â Â Â Â if (total_periods === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.ccResult.element, 'Years and/or frequency cannot be zero.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const A = P * Math.pow(1 + r_period, total_periods);
Â Â Â Â Â Â Â Â Â Â Â Â const interestEarned = A - P;

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.ccResult.element,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `Final Amount: <strong>${formatCurrency(A)}</strong><br>Interest Earned: ${formatCurrency(interestEarned)}`
Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 2. Loan Payment
Â Â Â Â Â Â Â Â function calcLoan() {
Â Â Â Â Â Â Â Â Â Â Â Â const L = validateInput(DOM.inputs.loanAmount, 0, Infinity, 'Enter a non-negative loan amount.');
Â Â Â Â Â Â Â Â Â Â Â Â const r_annual = validateInput(DOM.inputs.loanRate, 0, Infinity, 'Enter a non-negative annual rate.');
Â Â Â Â Â Â Â Â Â Â Â Â const years = validateInput(DOM.inputs.loanYears, 1, Infinity, 'Enter at least 1 year.');

Â Â Â Â Â Â Â Â Â Â Â Â if (L === null || r_annual === null || years === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.loanResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const r_monthly = (r_annual / 100) / 12;
Â Â Â Â Â Â Â Â Â Â Â Â const n_months = years * 12;

Â Â Â Â Â Â Â Â Â Â Â Â if (n_months === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.loanResult.element, 'Term cannot be zero.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â let M;
Â Â Â Â Â Â Â Â Â Â Â Â if (r_monthly === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â M = L / n_months;
Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â M = (L * r_monthly) / (1 - Math.pow(1 + r_monthly, -n_months));
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const totalPaid = M * n_months;
Â Â Â Â Â Â Â Â Â Â Â Â const totalInterest = totalPaid - L;

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.loanResult.element,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `Monthly Payment: <strong>${formatCurrency(M)}</strong><br>Total Paid: ${formatCurrency(totalPaid)}<br>Total Interest: ${formatCurrency(totalInterest)}`
Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 3. Custom Expression
Â Â Â Â Â Â Â Â function calcCustom() {
Â Â Â Â Â Â Â Â Â Â Â Â const expression = DOM.inputs.customExpression.element.value;
Â Â Â Â Â Â Â Â Â Â Â Â // Basic sanitization for client-side evaluation.
Â Â Â Â Â Â Â Â Â Â Â Â // For a real enterprise app, *never* execute user input directly like this on the backend.
Â Â Â Â Â Â Â Â Â Â Â Â // Use a dedicated, secure math expression parser library.
Â Â Â Â Â Â Â Â Â Â Â Â const safeExpression = expression.replace(/[^0-9+\-*/(). Math]/g, ''); // Allow basic math and 'Math.'

Â Â Â Â Â Â Â Â Â Â Â Â if (safeExpression.trim() === '') {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.customResult.element, 'Expression cannot be empty.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Using new Function() is dangerous with untrusted input in production.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // This is for demonstration only in this embedded context.
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const result = new Function('return ' + safeExpression)();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (typeof result === 'number' && !isNaN(result)) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.customResult.element, `Result: <strong>${result.toFixed(4)}</strong>`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.customResult.element, 'Invalid expression or non-numeric result.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â } catch (e) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.customResult.element, `Error in expression: ${e.message}`, true);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 4. ROI
Â Â Â Â Â Â Â Â function calcROI() {
Â Â Â Â Â Â Â Â Â Â Â Â const inv = validateInput(DOM.inputs.roiInvest, 0, Infinity, 'Enter a non-negative initial investment.');
Â Â Â Â Â Â Â Â Â Â Â Â const gain = validateInput(DOM.inputs.roiGain, -Infinity, Infinity, 'Enter a valid net profit/loss.');

Â Â Â Â Â Â Â Â Â Â Â Â if (inv === null || gain === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.roiResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â if (inv === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.roiResult.element, 'Initial investment cannot be zero for ROI calculation.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const roi = (gain / inv) * 100;
Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.roiResult.element, `ROI: <strong>${roi.toFixed(2)}%</strong>`);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 5. NPV & IRR
Â Â Â Â Â Â Â Â let npvChartInstance;
Â Â Â Â Â Â Â Â function calcNPV_IRR() {
Â Â Â Â Â Â Â Â Â Â Â Â const initialInvestment = validateInput(DOM.inputs.npvInitialInvestment, -Infinity, Infinity, 'Enter a valid initial investment.');
Â Â Â Â Â Â Â Â Â Â Â Â const cashFlowsStr = DOM.inputs.npvCashFlows.element.value;
Â Â Â Â Â Â Â Â Â Â Â Â const discountRate = validateInput(DOM.inputs.npvDiscountRate, 0, Infinity, 'Enter a non-negative discount rate.');

Â Â Â Â Â Â Â Â Â Â Â Â if (initialInvestment === null || cashFlowsStr === null || discountRate === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.npvIrrResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const cashFlows = cashFlowsStr.split(',').map(Number).filter(n => !isNaN(n));
Â Â Â Â Â Â Â Â Â Â Â Â if (cashFlows.length === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.npvIrrResult.element, 'Please enter at least one cash flow.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â // Calculate NPV
Â Â Â Â Â Â Â Â Â Â Â Â const calculateNPV = (rate, flows, initialInv) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let currentNPV = initialInv;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â flows.forEach((cf, i) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentNPV += cf / Math.pow(1 + (rate / 100), i + 1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return currentNPV;
Â Â Â Â Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â Â Â Â Â const npv = calculateNPV(discountRate, cashFlows, initialInvestment);

Â Â Â Â Â Â Â Â Â Â Â Â // Calculate IRR (using Newton-Raphson method for approximation)
Â Â Â Â Â Â Â Â Â Â Â Â const findIRR = (flows, initialInv) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let irrGuess = 0.1; // Initial guess for IRR (10%)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const maxIterations = 1000;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const tolerance = 1e-6;

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â for (let i = 0; i < maxIterations; i++) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const npvAtGuess = calculateNPV(irrGuess * 100, flows, initialInv);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Derivative of NPV for Newton-Raphson
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const derivative = flows.reduce((sum, cf, j) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const denominator = Math.pow(1 + irrGuess, j + 2);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return sum - (cf * (j + 1)) / denominator;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }, 0);

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (Math.abs(derivative) < tolerance) break; // Avoid division by zero or very small numbers

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const nextGuess = irrGuess - npvAtGuess / derivative;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (Math.abs(nextGuess - irrGuess) < tolerance) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return nextGuess;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â irrGuess = nextGuess;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return NaN; // Could not converge
Â Â Â Â Â Â Â Â Â Â Â Â };

Â Â Â Â Â Â Â Â Â Â Â Â const irr = findIRR(cashFlows, initialInvestment);

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.npvIrrResult.element,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `NPV: <strong>${formatCurrency(npv)}</strong><br>IRR: ${isNaN(irr) ? 'N/A' : formatPercentage(irr * 100)}`
Â Â Â Â Â Â Â Â Â Â Â Â );

Â Â Â Â Â Â Â Â Â Â Â Â // Charting NPV vs. Discount Rate
Â Â Â Â Â Â Â Â Â Â Â Â if (npvChartInstance) npvChartInstance.destroy();
Â Â Â Â Â Â Â Â Â Â Â Â const rates = Array.from({length: 31}, (_, i) => (i * 0.01) - 0.15); // -15% to 15% range for more context
Â Â Â Â Â Â Â Â Â Â Â Â const npvValues = rates.map(rate => calculateNPV(rate * 100, cashFlows, initialInvestment));

Â Â Â Â Â Â Â Â Â Â Â Â npvChartInstance = new Chart(DOM.inputs.npvChartCtx, {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type: 'line',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: rates.map(r => formatPercentage(r * 100)),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datasets: [{
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: 'Net Present Value',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: npvValues,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderColor: varStyle('--color-accent'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: 'rgba(0, 242, 242, 0.2)',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fill: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tension: 0.3,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â pointBackgroundColor: varStyle('--color-primary'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â pointBorderColor: varStyle('--color-background-light')
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â options: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â responsive: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â legend: { labels: { color: varStyle('--color-text-light'), font: { size: 14 } } },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tooltip: { callbacks: { label: (context) => `NPV: ${formatCurrency(context.parsed.y)}` } },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datalabels: { display: false } // No datalabels for line chart
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â scales: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â x: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'Discount Rate', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary'), autoSkip: true, maxRotation: 45, minRotation: 45 },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â y: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'NPV ($)', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â currentCharts.npvChart = npvChartInstance;
Â Â Â Â Â Â Â Â }


Â Â Â Â Â Â Â Â // 6. Amortization Schedule
Â Â Â Â Â Â Â Â let amortChartInstance;
Â Â Â Â Â Â Â Â function genAmort() {
Â Â Â Â Â Â Â Â Â Â Â Â const A = validateInput(DOM.inputs.amAmount, 0, Infinity, 'Enter a non-negative loan amount.');
Â Â Â Â Â Â Â Â Â Â Â Â const annual_rate = validateInput(DOM.inputs.amRate, 0, Infinity, 'Enter a non-negative annual rate.');
Â Â Â Â Â Â Â Â Â Â Â Â const years = validateInput(DOM.inputs.amYears, 1, Infinity, 'Enter at least 1 year.');

Â Â Â Â Â Â Â Â Â Â Â Â if (A === null || annual_rate === null || years === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.amortTable.element, '<div class="result error">Please correct the input errors.</div>', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const r_monthly = (annual_rate / 100) / 12;
Â Â Â Â Â Â Â Â Â Â Â Â const n_months = years * 12;

Â Â Â Â Â Â Â Â Â Â Â Â if (n_months === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.amortTable.element, '<div class="result error">Term cannot be zero.</div>', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â let M;
Â Â Â Â Â Â Â Â Â Â Â Â if (r_monthly === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â M = A / n_months;
Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â M = (A * r_monthly) / (1 - Math.pow(1 + r_monthly, -n_months));
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â let html = '<table><thead><tr><th>Month</th><th>Monthly Payment</th><th>Interest Paid</th><th>Principal Paid</th><th>Remaining Balance</th></tr></thead><tbody>';
Â Â Â Â Â Â Â Â Â Â Â Â let balance = A;
Â Â Â Â Â Â Â Â Â Â Â Â const principalPayments = [];
Â Â Â Â Â Â Â Â Â Â Â Â const interestPayments = [];
Â Â Â Â Â Â Â Â Â Â Â Â const labels = [];
Â Â Â Â Â Â Â Â Â Â Â Â let totalInterestPaid = 0;
Â Â Â Â Â Â Â Â Â Â Â Â let totalPrincipalPaid = 0;

Â Â Â Â Â Â Â Â Â Â Â Â for (let i = 1; i <= n_months; i++) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const interest = balance * r_monthly;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let principal = M - interest;

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Adjust last payment to zero out balance
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (i === n_months) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â principal = balance;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â M = balance + interest; // Adjust final payment amount
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â balance -= principal;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â totalInterestPaid += interest;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â totalPrincipalPaid += principal;

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â principalPayments.push(principal);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â interestPayments.push(interest);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels.push(`Month ${i}`);

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â html += `<tr>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${i}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${formatCurrency(M)}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${formatCurrency(interest)}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${formatCurrency(principal)}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${formatCurrency(balance)}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </tr>`;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â html += `<tr>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td colspan="2"><strong>Totals</strong></td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td><strong>${formatCurrency(totalInterestPaid)}</strong></td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td><strong>${formatCurrency(totalPrincipalPaid)}</strong></td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <td>${formatCurrency(0)}</td>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </tr>`;
Â Â Â Â Â Â Â Â Â Â Â Â html += '</tbody></table>';
Â Â Â Â Â Â Â Â Â Â Â Â DOM.inputs.amortTable.element.innerHTML = html;

Â Â Â Â Â Â Â Â Â Â Â Â // Charting amortization breakdown
Â Â Â Â Â Â Â Â Â Â Â Â if (amortChartInstance) amortChartInstance.destroy();
Â Â Â Â Â Â Â Â Â Â Â Â amortChartInstance = new Chart(DOM.inputs.amortChartCtx, {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type: 'bar',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: labels.filter((_,i) => i % Math.ceil(n_months / 12) === 0), // Show labels yearly to avoid clutter
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datasets: [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: 'Principal Paid',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: principalPayments.filter((_,i) => i % Math.ceil(n_months / 12) === 0),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: varStyle('--color-primary'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â stack: 'payments'
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: 'Interest Paid',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: interestPayments.filter((_,i) => i % Math.ceil(n_months / 12) === 0),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: varStyle('--color-accent'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â stack: 'payments'
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â options: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â responsive: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â legend: { labels: { color: varStyle('--color-text-light'), font: { size: 14 } } },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tooltip: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbacks: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: (context) => `${context.dataset.label}: ${formatCurrency(context.parsed.y)}`
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datalabels: { // Show data labels on bars
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: varStyle('--color-text-light'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font: { size: 10, weight: 'bold' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â formatter: (value) => value > (M/5) ? formatCurrency(value, '') : '', // Only show for larger segments
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â display: (context) => context.dataset.data[context.dataIndex] > M / 5 // Only display if significant value
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â scales: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â x: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'Month', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â y: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'Amount ($)', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â stacked: true
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â currentCharts.amortChart = amortChartInstance;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 7. Statistics & Chart.js
Â Â Â Â Â Â Â Â let statsChartInstance;
Â Â Â Â Â Â Â Â function drawStats() {
Â Â Â Â Â Â Â Â Â Â Â Â const labels = DOM.inputs.statsLabels.element.value.split(',').map(s => s.trim()).filter(s => s !== '');
Â Â Â Â Â Â Â Â Â Â Â Â const values = DOM.inputs.statsValues.element.value.split(',').map(Number).filter(v => !isNaN(v));
Â Â Â Â Â Â Â Â Â Â Â Â const chartType = DOM.inputs.statsChartType.element.value;

Â Â Â Â Â Â Â Â Â Â Â Â if (labels.length === 0 || values.length === 0 || labels.length !== values.length) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.statsSummary.element, 'Please enter valid labels and values, and ensure they match in number.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â const total = values.reduce((a, b) => a + b, 0);
Â Â Â Â Â Â Â Â Â Â Â Â if (total === 0 && (chartType === 'pie' || chartType === 'doughnut')) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.statsSummary.element, 'Total value cannot be zero for Pie/Doughnut charts.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â // Calculate advanced statistics
Â Â Â Â Â Â Â Â Â Â Â Â const mean = total / values.length;
Â Â Â Â Â Â Â Â Â Â Â Â const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length;
Â Â Â Â Â Â Â Â Â Â Â Â const stdDev = Math.sqrt(variance);
Â Â Â Â Â Â Â Â Â Â Â Â const minVal = Math.min(...values);
Â Â Â Â Â Â Â Â Â Â Â Â const maxVal = Math.max(...values);

Â Â Â Â Â Â Â Â Â Â Â Â let summaryHtml = `
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Total Sum:</strong> ${formatCurrency(total)}</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Average:</strong> ${formatCurrency(mean)}</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Standard Deviation:</strong> ${stdDev.toFixed(2)}</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Minimum Value:</strong> ${formatCurrency(minVal)}</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Maximum Value:</strong> ${formatCurrency(maxVal)}</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p><strong>Distribution:</strong> ${values.map((v, i) => `${labels[i]}: ${formatPercentage((v / total) * 100)}`).join(' | ')}</p>
Â Â Â Â Â Â Â Â Â Â Â Â `;
Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.statsSummary.element, summaryHtml);

Â Â Â Â Â Â Â Â Â Â Â Â // Destroy previous chart if exists
Â Â Â Â Â Â Â Â Â Â Â Â if (statsChartInstance) statsChartInstance.destroy();

Â Â Â Â Â Â Â Â Â Â Â Â statsChartInstance = new Chart(DOM.inputs.statsChartCtx, {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type: chartType,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: labels,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datasets: [{
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: values,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(0, 123, 255, 0.7)',Â  Â  // Primary Blue
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(0, 242, 242, 0.7)',Â  Â  // Accent Cyan
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(255, 193, 7, 0.7)',Â  Â  // Yellow
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(220, 53, 69, 0.7)',Â  Â  // Red
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(23, 162, 184, 0.7)', Â  // Teal
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(108, 117, 125, 0.7)',Â  // Secondary Gray
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(153, 102, 255, 0.7)',Â  // Purple
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'rgba(255, 159, 64, 0.7)'Â  Â  // Orange
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderColor: varStyle('--color-background-dark'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderWidth: 2
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â options: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â responsive: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â legend: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â position: 'top',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: varStyle('--color-text-light'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font: { size: 14 }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tooltip: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbacks: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: function(context) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let label = context.label || '';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (label) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += ': ';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (context.parsed.y !== undefined) { // For bar chart
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += formatCurrency(context.parsed.y);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â } else if (context.parsed) { // For pie/doughnut chart
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += formatCurrency(context.parsed);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (chartType === 'pie' || chartType === 'doughnut') {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentage = (context.parsed / total * 100).toFixed(1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += ` (${percentage}%)`;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return label;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datalabels: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: varStyle('--color-background-dark'), // Dark text for labels on colorful charts
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font: { weight: 'bold', size: 12 },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â formatter: (value, context) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (chartType === 'pie' || chartType === 'doughnut') {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentage = (value / total * 100).toFixed(1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return `${percentage}%`;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return formatCurrency(value, ''); // Only value for bar chart
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textShadow: { // Add subtle shadow for readability on dark backgrounds
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â blur: 3,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: 'rgba(255,255,255,0.5)'
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â scales: (chartType === 'bar') ? {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â x: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â y: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â } : {}
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â currentCharts.statsChart = statsChartInstance;
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 8. Crypto API & Chart.js
Â Â Â Â Â Â Â Â let cryptoChartInstance;
Â Â Â Â Â Â Â Â async function fetchCrypto() {
Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.cryptoResult.element, 'Loading live cryptocurrency prices...', false);
Â Â Â Â Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // In a production environment, this request should go to your backend service
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Your backend would then securely call CoinGecko API and return data
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // const response = await fetch('/api/crypto/prices');
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,cardano,solana,dogecoin,ripple,litecoin,polkadot&vs_currencies=usd');
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const data = await response.json();

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const cryptoData = [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'bitcoin', name: 'Bitcoin' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'ethereum', name: 'Ethereum' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'cardano', name: 'Cardano' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'solana', name: 'Solana' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'dogecoin', name: 'Dogecoin' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'ripple', name: 'XRP' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'litecoin', name: 'Litecoin' },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â { id: 'polkadot', name: 'Polkadot' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ];

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const labels = [];
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const prices = [];
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const displayMessages = [];

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cryptoData.forEach(crypto => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (data[crypto.id] && data[crypto.id].usd) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels.push(crypto.name);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â prices.push(data[crypto.id].usd);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayMessages.push(`${crypto.name}: <strong>${formatCurrency(data[crypto.id].usd)}</strong>`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (prices.length === 0) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.cryptoResult.element, 'Could not load cryptocurrency data or no prices found.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.cryptoResult.element, displayMessages.join(' | '));

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Destroy previous chart if exists
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (cryptoChartInstance) cryptoChartInstance.destroy();

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cryptoChartInstance = new Chart(DOM.inputs.cryptoChartCtx, {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type: 'doughnut',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: labels,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datasets: [{
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: prices,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#f7931a', // Bitcoin
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#627eea', // Ethereum
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#3cc48a', // Cardano
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#9945FF', // Solana
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#CB2D03', // Dogecoin
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#23292F', // XRP
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#BFBFBF', // Litecoin
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â '#E6007A'Â  // Polkadot
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderColor: varStyle('--color-background-dark'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderWidth: 2
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â options: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â responsive: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â legend: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â position: 'right',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: varStyle('--color-text-light'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font: { size: 14 }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tooltip: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbacks: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: function(context) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let label = context.label || '';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (label) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += ': ';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (context.parsed) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += formatCurrency(context.parsed);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentage = (context.parsed / total * 100).toFixed(1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label += ` (${percentage}%)`;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return label;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datalabels: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: varStyle('--color-background-dark'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font: { weight: 'bold', size: 12 },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â formatter: (value, context) => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentage = (value / total * 100).toFixed(1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (percentage > 5) return `${percentage}%`; // Only show if segment is large enough
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return '';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â textShadow: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â blur: 3,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color: 'rgba(255,255,255,0.5)'
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentCharts.cryptoChart = cryptoChartInstance;
Â Â Â Â Â Â Â Â Â Â Â Â } catch (error) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.error('Error fetching crypto data:', error);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.cryptoResult.element, `Error loading crypto data. Please try again later. Details: ${error.message}`, true);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 9. Currency Converter (exchangerate.host)
Â Â Â Â Â Â Â Â async function convertFX() {
Â Â Â Â Â Â Â Â Â Â Â Â const amount = validateInput(DOM.inputs.fxAmount, 0, Infinity, 'Enter a non-negative amount.');
Â Â Â Â Â Â Â Â Â Â Â Â const fromCurrency = DOM.inputs.fxFrom.element.value;
Â Â Â Â Â Â Â Â Â Â Â Â const toCurrency = DOM.inputs.fxTo.element.value;

Â Â Â Â Â Â Â Â Â Â Â Â if (amount === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element, 'Please correct the input error.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â if (fromCurrency === toCurrency) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element, 'Cannot convert to the same currency.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element, 'Performing conversion...', false);

Â Â Â Â Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // In production, this would go through your backend for API key security
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // const response = await fetch(`/api/fx/convert?from=${fromCurrency}&to=${toCurrency}&amount=${amount}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const response = await fetch(`https://api.exchangerate.host/convert?from=${fromCurrency}&to=${toCurrency}&amount=${amount}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const data = await response.json();

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (data.success && data.result !== undefined) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `${formatCurrency(amount, fromCurrency)} = <strong>${formatCurrency(data.result, toCurrency)}</strong>`
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element, `Conversion error: ${data.error ? data.error.info : 'Unknown error'}`, true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â } catch (error) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.error('Error fetching exchange rate:', error);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.fxResult.element, `Error connecting to currency service. Please try again. Details: ${error.message}`, true);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 10. WASM Demo (Placeholder for real WASM module)
Â Â Â Â Â Â Â Â // In a real application, you would compile a C/C++/Rust function (e.g., for complex math, encryption)
Â Â Â Â Â Â Â Â // to a .wasm file, load it, and call its exported functions.
Â Â Â Â Â Â Â Â // For demonstration, this is a dummy WASM module that just exports a simple function.
Â Â Â Â Â Â Â Â // The actual `pow` calculation here will be a JavaScript fallback for realism without a real WASM binary.

Â Â Â Â Â Â Â Â // Minimal WASM binary for `(module (func (export "pow")))` (no actual logic)
Â Â Â Â Â Â Â Â // For a real `pow` function, the binary would be much larger and contain compiled code.
Â Â Â Â Â Â Â Â const wasmCode = Uint8Array.from(atob('AGFzbQEAAAABAGAAAQJgAn9_AX8DBAMBAAcGAQFwb3cwAAcGAQtwb3dfcmVhbDAACgkBAQEACwkCAQACAwsCAAEABAACAAwBAQABAQ0BAAELCwIBAAE='), c=>c.charCodeAt(0));
Â Â Â Â Â Â Â Â let wasmInstance;

Â Â Â Â Â Â Â Â WebAssembly.instantiate(wasmCode)
Â Â Â Â Â Â Â Â Â Â Â Â .then(wm => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â wasmInstance = wm.instance;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.log('WASM module loaded successfully (placeholder).');
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // In a real scenario, you'd check for `wasmInstance.exports.yourFunctionName`
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // For this example, we will just use Math.pow for the actual calc.
Â Â Â Â Â Â Â Â Â Â Â Â })
Â Â Â Â Â Â Â Â Â Â Â Â .catch(error => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.error('Error loading WASM module:', error);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.wasmResult.element, 'Error: WASM module failed to load. Check console.', true);
Â Â Â Â Â Â Â Â Â Â Â Â });

Â Â Â Â Â Â Â Â function calcWasm() {
Â Â Â Â Â Â Â Â Â Â Â Â const base = validateInput(DOM.inputs.wasmBase, 0, Infinity, 'Enter a non-negative base.');
Â Â Â Â Â Â Â Â Â Â Â Â const exponent = validateInput(DOM.inputs.wasmExp, 0, Infinity, 'Enter a non-negative exponent.');

Â Â Â Â Â Â Â Â Â Â Â Â if (base === null || exponent === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.wasmResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â if (!wasmInstance) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.wasmResult.element, 'WASM module not loaded. Using JavaScript fallback...', false);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const jsResult = Math.pow(base, exponent);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.wasmResult.element, `JS Fallback: ${base}^${exponent} = <strong>${jsResult}</strong>`);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â // Simulate WASM calculation - replace with actual WASM export call if available
Â Â Â Â Â Â Â Â Â Â Â Â // e.g., const result = wasmInstance.exports.pow(base, exponent);
Â Â Â Â Â Â Â Â Â Â Â Â const simulatedWasmResult = Math.pow(base, exponent); // Using JS for demo realism

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.wasmResult.element, `WASM Calculation: ${base}^${exponent} = <strong>${simulatedWasmResult}</strong>`);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 11. Monte Carlo Simulation
Â Â Â Â Â Â Â Â let simChartInstance;
Â Â Â Â Â Â Â Â function runMonteCarlo() {
Â Â Â Â Â Â Â Â Â Â Â Â const initialCapital = validateInput(DOM.inputs.simInitialCapital, 0, Infinity, 'Enter non-negative initial capital.');
Â Â Â Â Â Â Â Â Â Â Â Â const avgReturn = validateInput(DOM.inputs.simAvgReturn, -100, Infinity, 'Enter a valid average return.');
Â Â Â Â Â Â Â Â Â Â Â Â const stdDev = validateInput(DOM.inputs.simStdDev, 0, Infinity, 'Enter non-negative standard deviation.');
Â Â Â Â Â Â Â Â Â Â Â Â const years = validateInput(DOM.inputs.simYears, 1, Infinity, 'Enter at least 1 year.');
Â Â Â Â Â Â Â Â Â Â Â Â const numRuns = validateInput(DOM.inputs.simRuns, 100, 10000, 'Runs between 100 and 10000.');

Â Â Â Â Â Â Â Â Â Â Â Â if (initialCapital === null || avgReturn === null || stdDev === null || years === null || numRuns === null) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.simResult.element, 'Please correct the input errors.', true);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.simResult.element, '<lottie-player src="https://assets2.lottiefiles.com/packages/lf20_c0x8a3.json" background="transparent" speed="1" style="width: 50px; height: 50px; margin: auto;" loop autoplay></lottie-player><br>Running simulations...', false);

Â Â Â Â Â Â Â Â Â Â Â Â // Offload heavy computation to a Web Worker or Backend for real enterprise apps
Â Â Â Â Â Â Â Â Â Â Â Â // For this demo, run directly in main thread for simplicity.
Â Â Â Â Â Â Â Â Â Â Â Â setTimeout(() => { // Simulate async computation
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const dailyReturn = avgReturn / 25200; // 252 trading days per year
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const dailyStdDev = stdDev / Math.sqrt(252) / 100;

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const finalPortfolios = [];
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let maxPortfolio = initialCapital;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let minPortfolio = initialCapital;

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â for (let i = 0; i < numRuns; i++) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â let currentCapital = initialCapital;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â for (let j = 0; j < years * 252; j++) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const randomFactor = gaussianRandom() * dailyStdDev + dailyReturn;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentCapital *= (1 + randomFactor);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â finalPortfolios.push(currentCapital);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (currentCapital > maxPortfolio) maxPortfolio = currentCapital;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (currentCapital < minPortfolio) minPortfolio = currentCapital;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â finalPortfolios.sort((a, b) => a - b);

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const meanPortfolio = finalPortfolios.reduce((a,b)=>a+b)/numRuns;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const medianPortfolio = finalPortfolios[Math.floor(numRuns * 0.50)];
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentile10 = finalPortfolios[Math.floor(numRuns * 0.10)];
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const percentile90 = finalPortfolios[Math.floor(numRuns * 0.90)];

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â displayResult(DOM.inputs.simResult.element,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `<h4>Simulation Results (${numRuns} Runs over ${years} Years):</h4>` +
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `<p><strong>Average Final Capital:</strong> ${formatCurrency(meanPortfolio)}</p>` +
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `<p><strong>Median (50th Percentile):</strong> ${formatCurrency(medianPortfolio)}</p>` +
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `<p><strong>10th Percentile (Worst Case):</strong> ${formatCurrency(percentile10)}</p>` +
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `<p><strong>90th Percentile (Best Case):</strong> ${formatCurrency(percentile90)}</p>`
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â );

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Charting distribution of final portfolio values (Histogram)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (simChartInstance) simChartInstance.destroy();

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const numBins = 20;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const binSize = (maxPortfolio - minPortfolio) / numBins;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const bins = Array(numBins).fill(0);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const binLabels = [];

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â for (let i = 0; i < numBins; i++) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const lowerBound = minPortfolio + i * binSize;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const upperBound = lowerBound + binSize;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â binLabels.push(`${formatCurrency(lowerBound, '').split('.')[0]}-${formatCurrency(upperBound, '').split('.')[0]}`); // Shorter labels for readability
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â finalPortfolios.forEach(val => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â const binIndex = Math.min(Math.floor((val - minPortfolio) / binSize), numBins - 1);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â bins[binIndex]++;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â simChartInstance = new Chart(DOM.inputs.simChartCtx, {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type: 'bar',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â labels: binLabels,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datasets: [{
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: 'Frequency of Final Capital',
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data: bins,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â backgroundColor: varStyle('--color-primary'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderColor: varStyle('--color-background-dark'),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â borderWidth: 1
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â options: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â responsive: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â legend: { labels: { color: varStyle('--color-text-light'), font: { size: 14 } } },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tooltip: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbacks: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label: (context) => `Occurrences: ${context.parsed.y}`
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â datalabels: { display: false }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â scales: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â x: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'Final Capital ($)', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary'), autoSkip: true, maxRotation: 45, minRotation: 45 },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â y: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â title: { display: true, text: 'Number of Simulations', color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ticks: { color: varStyle('--color-text-secondary') },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grid: { color: 'rgba(255,255,255,0.1)' }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentCharts.simChart = simChartInstance;
Â Â Â Â Â Â Â Â Â Â Â Â }, 100); // Simulate network/computation delay
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // Function to generate a random number from a standard normal distribution (Box-Muller transform)
Â Â Â Â Â Â Â Â function gaussianRandom() {
Â Â Â Â Â Â Â Â Â Â Â Â let u = 0, v = 0;
Â Â Â Â Â Â Â Â Â Â Â Â while (u === 0) u = Math.random(); // Converting [0,1) to (0,1)
Â Â Â Â Â Â Â Â Â Â Â Â while (v === 0) v = Math.random();
Â Â Â Â Â Â Â Â Â Â Â Â return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // 12. Premium Features & Monetization
Â Â Â Â Â Â Â Â function redirectToSubscription() {
Â Â Â Â Â Â Â Â Â Â Â Â alert('Redirecting to Financiator Pro Premium Subscription Page! (This would be a real payment gateway in production)');
Â Â Â Â Â Â Â Â Â Â Â Â // In a real application:
Â Â Â Â Â Â Â Â Â Â Â Â // window.location.href = 'https://your-premium-subscription-page.com';
Â Â Â Â Â Â Â Â }


Â Â Â Â Â Â Â Â // --- Initial Application Setup ---
Â Â Â Â Â Â Â Â document.addEventListener('DOMContentLoaded', () => {
Â Â Â Â Â Â Â Â Â Â Â Â // Activate the first tab and its content by default
Â Â Â Â Â Â Â Â Â Â Â Â DOM.tabs[0].classList.add('active');
Â Â Â Â Â Â Â Â Â Â Â Â DOM.calculators[0].classList.add('active');

Â Â Â Â Â Â Â Â Â Â Â Â // Set up initial Chart.js defaults for better aesthetics
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.color = varStyle('--color-text-light');
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.2)';
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.font.family = 'Inter';
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.font.size = 13;
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.plugins.tooltip.backgroundColor = varStyle('--color-background-dark');
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.plugins.tooltip.borderColor = varStyle('--color-accent');
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.plugins.tooltip.borderWidth = 1;
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.plugins.tooltip.bodyColor = varStyle('--color-text-light');
Â Â Â Â Â Â Â Â Â Â Â Â Chart.defaults.plugins.tooltip.titleColor = varStyle('--color-primary');

Â Â Â Â Â Â Â Â Â Â Â Â // Trigger initial calculations for a live feel on load
Â Â Â Â Â Â Â Â Â Â Â Â calcCompound();
Â Â Â Â Â Â Â Â Â Â Â Â // Optional: Auto-load crypto data if desired, but can be heavy
Â Â Â Â Â Â Â Â Â Â Â Â // fetchCrypto();
Â Â Â Â Â Â Â Â });

Â Â Â Â Â Â Â Â // Function to handle Google AdSense dynamic loading
Â Â Â Â Â Â Â Â // In a real scenario, you'd ensure ads load when sections become visible
Â Â Â Â Â Â Â Â // or based on user interaction, adhering to AdSense policies.
Â Â Â Â Â Â Â Â function loadAdSenseAds() {
Â Â Â Â Â Â Â Â Â Â Â Â if (typeof window.adsbygoogle !== 'undefined') {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Find all ad slots and push them to the adsbygoogle array
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â document.querySelectorAll('.adsbygoogle').forEach(adSlot => {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (window.adsbygoogle = window.adsbygoogle || []).push({});
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â // Call this on DOMContentLoaded or after a short delay
Â Â Â Â Â Â Â Â // to give the ad script time to load
Â Â Â Â Â Â Â Â setTimeout(loadAdSenseAds, 1000); // Delay by 1 second
Â Â Â Â </script>
</body>
</html>