<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechMart - Tu Tienda Online</title>
    <style>
        /* Variables CSS para facilitar personalizaci√≥n */
        :root {
            --primary-color: #ff6b35;
            --secondary-color: #004e92;
            --accent-color: #00d4ff;
            --dark-gray: #2c3e50;
            --light-gray: #f8f9fa;
            --white: #ffffff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        /* Reset y configuraci√≥n base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-gray);
            background-color: var(--light-gray);
        }

        /* Encabezado */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--box-shadow);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            color: var(--white);
            display: flex;
            align-items: center;
        }

        .logo::before {
            content: "üõí";
            margin-right: 8px;
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 50px 12px 16px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            outline: none;
            transition: var(--transition);
        }

        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--accent-color);
            border: none;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .search-btn:hover {
            background: #0099cc;
        }

        .cart-icon {
            position: relative;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 12px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            color: var(--white);
            font-size: 1.2rem;
        }

        .cart-icon:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger-color);
            color: var(--white);
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
            min-width: 20px;
            text-align: center;
        }

        /* Navegaci√≥n */
        .nav {
            background: var(--white);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-item {
            color: var(--dark-gray);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-item:hover, .nav-item.active {
            background: var(--primary-color);
            color: var(--white);
        }

        /* Banner promocional */
        .banner {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: var(--white);
            padding: 4rem 0;
            text-align: center;
            margin-bottom: 3rem;
        }

        .banner-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .banner h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .banner p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .cta-button {
            display: inline-block;
            background: var(--white);
            color: var(--primary-color);
            padding: 15px 30px;
            text-decoration: none;
            border-radius: var(--border-radius);
            font-weight: bold;
            font-size: 1.1rem;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        /* Contenido principal */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--dark-gray);
        }

        /* Filtros */
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            background: var(--white);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--primary-color);
            color: var(--white);
        }

        /* Grilla de productos */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .product-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; /* A√±adido border-color a la transici√≥n */
            cursor: pointer;
            overflow: hidden;
            animation: fadeIn 0.5s ease-out; /* Animaci√≥n de entrada */
            display: flex; /* Para organizar los botones en la parte inferior */
            flex-direction: column;
            justify-content: space-between;
            position: relative; /* Necesario para el posicionamiento absoluto del SVG */
            z-index: 1; /* Asegura que el contenido est√© por encima del SVG */
            border: 2px solid transparent; /* Borde transparente por defecto */
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25); /* Sombra m√°s pronunciada */
            border-color: var(--primary-color); /* Color de borde al pasar el rat√≥n */
        }

        /* Contenedor y SVG para la animaci√≥n */
        .product-card-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Permite que los clics pasen a los elementos debajo */
            z-index: -1; /* Coloca el SVG detr√°s del contenido de la tarjeta */
            opacity: 0; /* Oculto por defecto */
            transition: opacity 0.3s ease; /* Transici√≥n suave para la aparici√≥n */
            border-radius: var(--border-radius); /* Asegura que el SVG respete el border-radius de la tarjeta */
            overflow: hidden; /* Oculta partes del SVG que se salgan del contenedor */
        }

        .product-card:hover .product-card-svg-container {
            opacity: 1; /* Muestra el SVG al pasar el rat√≥n */
        }

        .product-card-svg {
            width: 100%;
            height: 100%;
            transform: scale(1.0); /* Tama√±o inicial */
            /* Animaci√≥n continua al pasar el rat√≥n */
            animation: svgPulse 2s ease-in-out infinite alternate; 
        }

        @keyframes svgPulse {
            0% {
                transform: scale(1.0);
                opacity: 0.1;
            }
            100% {
                transform: scale(1.2);
                opacity: 0.3;
            }
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--primary-color);
        }

        .product-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-gray);
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .product-card-actions {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-top: auto; /* Empuja los botones hacia abajo */
        }

        .add-to-cart, .generate-description-btn {
            width: 100%;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .add-to-cart:hover {
            background: #e55a2b;
            transform: translateY(-2px);
        }

        .add-to-cart:active {
            transform: translateY(0);
        }

        .generate-description-btn {
            background: var(--secondary-color);
        }

        .generate-description-btn:hover {
            background: #003a70;
            transform: translateY(-2px);
        }

        .generate-description-btn:active {
            transform: translateY(0);
        }

        /* Modal del carrito */
        .cart-modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: flex; /* Usar flexbox para centrar */
            justify-content: center;
            align-items: center;
        }

        .cart-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--box-shadow);
            position: relative; /* Para el bot√≥n de cerrar */
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .close-cart:hover {
            color: var(--danger-color);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .cart-item:last-child {
            border-bottom: none; /* No border for the last item */
        }

        .cart-item button {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .cart-item button:hover {
            background: #c82333;
        }

        .cart-total {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 1rem;
            text-align: right;
            color: var(--primary-color);
        }

        .checkout-btn {
            width: 100%;
            background: var(--success-color);
            color: var(--white);
            border: none;
            padding: 15px;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            transition: var(--transition);
        }

        .checkout-btn:hover {
            background: #218838;
        }

        /* Footer */
        .footer {
            background: var(--dark-gray);
            color: var(--white);
            padding: 3rem 0 1rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .footer-section a {
            color: var(--white);
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #495057;
            margin-top: 2rem;
            opacity: 0.8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                text-align: center;
            }

            .search-container {
                width: 100%;
                max-width: none; /* Allow it to take full width */
            }

            .nav-menu {
                flex-direction: column;
                gap: 0.5rem;
            }

            .banner h1 {
                font-size: 2rem;
            }

            .banner p {
                font-size: 1rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
            }

            .filters {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Animaciones */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: var(--white);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 3000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        /* Custom Modal for Alerts (replacing alert()) */
        .custom-modal-overlay {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 3000; /* Higher than cart modal */
            justify-content: center;
            align-items: center;
        }

        .custom-modal-content {
            background: var(--white);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
        }

        .custom-modal-content h4 {
            margin-bottom: 15px;
            color: var(--dark-gray);
            font-size: 1.3rem;
        }

        .custom-modal-content button {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .custom-modal-content button:hover {
            background: #e55a2b;
        }

        /* Modal de Descripci√≥n de Producto */
        .description-modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2500; /* Entre carrito y alertas */
            justify-content: center;
            align-items: center;
        }

        .description-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--box-shadow);
            position: relative;
        }

        .description-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .description-header h3 {
            color: var(--secondary-color);
        }

        .close-description-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .close-description-modal:hover {
            color: var(--danger-color);
        }

        .description-text {
            margin-top: 1rem;
            font-size: 1rem;
            color: var(--dark-gray);
            white-space: pre-wrap; /* Para respetar saltos de l√≠nea del LLM */
        }

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none; /* Oculto por defecto */
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- Encabezado -->
    <header class="header">
        <div class="header-container">
            <a href="#" class="logo">TechMart</a>
            <div class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="Buscar productos...">
                <button class="search-btn" onclick="searchProducts()">üîç</button>
            </div>
            <button class="cart-icon" onclick="toggleCart()">
                üõí
                <span class="cart-count" id="cart-count">0</span>
            </button>
        </div>
    </header>

    <!-- Navegaci√≥n -->
    <nav class="nav">
        <div class="nav-container">
            <div class="nav-menu">
                <a href="#" class="nav-item active" data-category="all" onclick="filterProducts(event, 'all')">Todos</a>
                <a href="#" class="nav-item" data-category="tecnologia" onclick="filterProducts(event, 'tecnologia')">Tecnolog√≠a</a>
                <a href="#" class="nav-item" data-category="limpieza" onclick="filterProducts(event, 'limpieza')">Limpieza</a>
                <a href="#" class="nav-item" data-category="moda" onclick="filterProducts(event, 'moda')">Moda</a>
                <a href="#" class="nav-item" data-category="alimentos" onclick="filterProducts(event, 'alimentos')">Alimentos</a>
                <a href="#" class="nav-item" data-category="juguetes" onclick="filterProducts(event, 'juguetes')">Jugueter√≠a</a>
                <a href="#" class="nav-item" data-category="hogar" onclick="filterProducts(event, 'hogar')">Hogar</a>
            </div>
        </div>
    </nav>

    <!-- Banner promocional -->
    <section class="banner">
        <div class="banner-content">
            <h1>¬°Ofertas Imperdibles!</h1>
            <p>Encuentra los mejores productos al mejor precio</p>
            <a href="#productos" class="cta-button">Ver Productos</a>
        </div>
    </section>

    <!-- Contenido principal -->
    <main class="main-content">
        <section id="productos">
            <h2 class="section-title">Nuestros Productos</h2>
            
            <!-- Filtros -->
            <div class="filters">
                <button class="filter-btn active" data-category="all" onclick="filterProducts(event, 'all')">Todos</button>
                <button class="filter-btn" data-category="tecnologia" onclick="filterProducts(event, 'tecnologia')">Tecnolog√≠a</button>
                <button class="filter-btn" data-category="limpieza" onclick="filterProducts(event, 'limpieza')">Limpieza</button>
                <button class="filter-btn" data-category="moda" onclick="filterProducts(event, 'moda')">Moda</button>
                <button class="filter-btn" data-category="alimentos" onclick="filterProducts(event, 'alimentos')">Alimentos</button>
                <button class="filter-btn" data-category="juguetes" onclick="filterProducts(event, 'juguetes')">Jugueter√≠a</button>
                <button class="filter-btn" data-category="hogar" onclick="filterProducts(event, 'hogar')">Hogar</button>
            </div>

            <!-- Grilla de productos -->
            <div class="products-grid" id="products-grid">
                <!-- Los productos se generar√°n din√°micamente con JavaScript -->
            </div>
        </section>
    </main>

    <!-- Modal del carrito -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <h3>Carrito de Compras</h3>
                <button class="close-cart" onclick="toggleCart()">√ó</button>
            </div>
            <div id="cart-items">
                <!-- Los items del carrito se generar√°n din√°micamente -->
            </div>
            <div class="cart-total" id="cart-total">
                Total: $0
            </div>
            <button class="checkout-btn" onclick="checkout()">Finalizar Compra</button>
        </div>
    </div>

    <!-- Modal de Descripci√≥n de Producto -->
    <div class="description-modal" id="description-modal">
        <div class="description-content">
            <div class="description-header">
                <h3 id="description-product-name"></h3>
                <button class="close-description-modal" onclick="closeDescriptionModal()">√ó</button>
            </div>
            <div class="loading-spinner" id="description-loading-spinner"></div>
            <p class="description-text" id="product-description-text"></p>
        </div>
    </div>

    <!-- Custom Modal for Alerts -->
    <div class="custom-modal-overlay" id="custom-alert-modal">
        <div class="custom-modal-content">
            <h4 id="custom-alert-message"></h4>
            <button onclick="closeCustomAlert()">Aceptar</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Empresa</h3>
                <a href="#">Sobre Nosotros</a>
                <a href="#">Contacto</a>
                <a href="#">Trabaja con Nosotros</a>
                <a href="#">Prensa</a>
            </div>
            <div class="footer-section">
                <h3>Ayuda</h3>
                <a href="#">Centro de Ayuda</a>
                <a href="#">C√≥mo Comprar</a>
                <a href="#">Env√≠os</a>
                <a href="#">Devoluciones</a>
            </div>
            <div class="footer-section">
                <h3>Legales</h3>
                <a href="#">T√©rminos y Condiciones</a>
                <a href="#">Pol√≠ticas de Privacidad</a>
                <a href="#">Pol√≠ticas de Cookies</a>
                <a href="#">Resoluci√≥n de Disputas</a>
            </div>
            <div class="footer-section">
                <h3>S√≠guenos</h3>
                <a href="#">Facebook</a>
                <a href="#">Instagram</a>
                <a href="#">Twitter</a>
                <a href="#">YouTube</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 TechMart. Todos los derechos reservados.</p>
        </div>
    </footer>
¬†<script>
   // Base de datos de productos
    const products = [
    // Tecnolog√≠a
    { id: 1, name: "iPhone 15 Pro", price: 999, category: "tecnologia", image: "https://amateurphotographer.com/wp-content/uploads/sites/7/2023/09/iPhone_15_Pro_003.jpeg" },
    { id: 2, name: "MacBook Air M2", price: 1299, category: "tecnologia", image: "https://helios-i.mashable.com/imagery/reviews/05mVngxL2rVUjcFRhJuAC9f/images-8.fill.size_2000x1125.v1709794195.jpg" },
    { id: 4, name: "Samsung Galaxy S24", price: 899, category: "tecnologia", image: "https://promart.vteximg.com.br/arquivos/ids/8040147-1000-1000/image-477644461d604188aaba611771a431eb.jpg?v=638551902778530000" },
    { id: 5, name: "iPad Pro", price: 799, category: "tecnologia", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVFd2JoXow4hVYBN_XLfX1Mj2pEPPRIXkgyA&s" },
    { id: 6, name: "PlayStation 5", price: 499, category: "tecnologia", image: "https://www.evrgames.com.ar/wp-content/uploads/2024/05/PS5-SLIM-DIGITAL-SPIDER-MAN-2-blundle-publi.jpg" },
    { id: 37, name: "Smart TV 4K 55\"", price: 599, category: "tecnologia", image: "https://www.megatone.net/Images/Articulos/zoom2x/388/TEL6080LGL_1.jpg" },
    { id: 38, name: "C√°mara DSLR Canon", price: 699, category: "tecnologia", image: "https://www.digi-zoom.com.ar/images/productos/2310_1_m.jpg" },
    { id: 59, name: "iPod", price: 199, category: "tecnologia", image: "https://i.pinimg.com/736x/d7/0b/77/d70b775a5360d537002581bca9fc1555.jpg" },
    { id: 60, name: "Parlante JBL", price: 150, category: "tecnologia", image: "https://www.heavenimagenes.com/heavencommerce/9297a8d7-5b05-4931-b287-026a1b306e14/images/v2/JBL/3419_xlarge.jpg" },
    { id: 61, name: "Pava el√©ctrica", price: 50, category: "tecnologia", image: "https://www.casadelaudio.com/Image/0/750_750-Mate.jpg" },
    { id: 62, name: "Aire acondicionado", price: 700, category: "tecnologia", image: "https://static.hendel.com/media/catalog/product/cache/b866fd8d147dcce474dc8744e477ca66/5/1/51773_0.jpg" },
    { id: 63, name: "Luces LED", price: 30, category: "tecnologia", image: "https://m.media-amazon.com/images/I/81u+X6JkgFL._AC_SL1500_.jpg" },
    { id: 64, name: "Computadora Samsung", price: 1100, category: "tecnologia", image: "https://images.samsung.com/is/image/samsung/assets/us/galaxybooks/01182025/GB-PCD-Discover-FT12-FeatureColumnCarousel-GB5Pro360-M-V3.jpg?$720_N_JPG$" },
    { id: 65, name: "Routers", price: 80, category: "tecnologia", image: "https://www.precio-calidad.com.ar/wp-content/uploads/2023/07/E5350-1.jpg" },
    { id: 66, name: "Cafetera el√©ctrica", price: 95, category: "tecnologia", image: "https://store.midea.com.ar/media/catalog/product/cache/735e17795f877390d3f8de6c13378a19/c/m/cm-m112bar1_a.jpg" },
    { id: 67, name: "Tablet Samsung", price: 600, category: "tecnologia", image: "https://images.samsung.com/ar/galaxy-tab-s8/feature/galaxy-tab-s8-ultra-graphite-kv-mo.jpg" },
    { id: 68, name: "Cargador inal√°mbrico", price: 45, category: "tecnologia", image: "https://static.bidcom.com.ar/publicacionesML/productos/CWIR0001/1000x1000-CWIR0001.jpg" },
    { id: 69, name: "Ventilador", price: 70, category: "tecnologia", image: "https://static.hendel.com/media/catalog/product/cache/b866fd8d147dcce474dc8744e477ca66/4/4/44762.jpg" },
    { id: 70, name: "Mouse inal√°mbrico", price: 25, category: "tecnologia", image: "https://playmania438.com.ar/wp-content/uploads/2021/06/presentacion41-d161c22d39aa4461f615783664064190-1024-1024.jpg" },

    // Limpieza
    { id: 7, name: "Detergente L√≠quido", price: 15, category: "limpieza", image: "https://acdn-us.mitiendanube.com/stores/001/056/587/products/rinde-3l-2025-05-27t121402-488-9cd7636808db1bfba717483588803257-1024-1024.png" },
    { id: 8, name: "Aspiradora Robot", price: 299, category: "limpieza", image: "https://www.kitchencenter.cl/cdn/shop/files/Robot_Vacuum_ERB30_LivingRoom_Electrolux1500px_9812d41d-6334-4bc7-8330-53ece71968b9.jpg?v=1713200169" },
    { id: 9, name: "Papel Higi√©nico x12", price: 25, category: "limpieza", image: "https://jumboargentina.vtexassets.com/arquivos/ids/713698/Papel-Higi-nico-Campanita-Hoja-Simple-4-U-1-17470.jpg?v=637951594060470000" },
    { id: 10, name: "Desinfectante", price: 8, category: "limpieza", image: "https://www.cif.com.ar/images/h0nadbhvm6m4/6BBZQH8q1pGDTk4Rv0ebqz/571a9775951195775c55ab8f619fa1c9/Q2lmX0Flcm9zb2xfRGVzaW5mZWN0YW50ZV9MYXZhbmRhLnBuZw/1100w-1100h/cif-aerosol-lavender-lavender-pack.jpg" },
    { id: 11, name: "Jab√≥n Antibacterial", price: 12, category: "limpieza", image: "https://www.protex-soap.com/content/dam/cp-sites/personal-care/protex-relaunch/latam/products/jab%C3%B3n-antibacterial-protex-avena-110-g.jpg" },
    { id: 12, name: "Toallas de Papel", price: 18, category: "limpieza", image: "https://www.papelerarivadavia.com.ar/wp-content/uploads/2020/09/Toalla-Elegante-Doble-Hoja.jpg" },
    { id: 40, name: "Guantes de Limpieza", price: 7, category: "limpieza", image: "https://www.comercialaviles.com/wp-content/uploads/2019/02/tipos-de-guantes.jpg" },

    // Moda
    { id: 13, name: "Jeans Cl√°sicos", price: 79, category: "moda", image: "https://acdn-us.mitiendanube.com/stores/001/218/661/products/15403-51-c263a856a54471d8b516909749995683-1024-1024.jpg" },
    { id: 14, name: "Camiseta Premium", price: 35, category: "moda", image: "https://png.pngtree.com/png-vector/20250408/ourlarge/pngtree-blank-black-tee-shirt-isolated-on-background-png-image_15955197.png" },
    { id: 15, name: "Zapatillas Running", price: 120, category: "moda", image: "https://www.dexter.com.ar/on/demandware.static/-/Sites-365-dabra-catalog/default/dwf7645d80/products/NIDR2665-402/NIDR2665-402-6.JPG" },
    { id: 71, name: "Musculosa", price: 28, category: "moda", image: "https://eyelit.com.ar/cdn/shop/products/0166P0W.05.1.jpg?v=1610550085" }
];


    // Carrito de compras (almacenado en memoria)
    let cart = [];
    let currentFilter = 'all';
    let currentSearchTerm = '';

    // Funci√≥n para renderizar productos en la cuadr√≠cula
    function renderProducts(productsToRender = products) {
        const grid = document.getElementById('products-grid');
        grid.innerHTML = ''; // Limpia la cuadr√≠cula actual

        // Filtra por t√©rmino de b√∫squeda si existe
        let filteredBySearch = productsToRender;
        if (currentSearchTerm) {
            const searchTermLower = currentSearchTerm.toLowerCase();
            filteredBySearch = productsToRender.filter(product =>
                product.name.toLowerCase().includes(searchTermLower)
            );
        }

        // Si no hay productos despu√©s de filtrar, muestra un mensaje
        if (filteredBySearch.length === 0) {
            grid.innerHTML = '<p style="text-align: center; font-size: 1.2rem; color: var(--dark-gray);">No se encontraron productos para esta categor√≠a o b√∫squeda.</p>';
            return;
        }

        // Crea y a√±ade las tarjetas de producto
        filteredBySearch.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            productCard.innerHTML = `
                <div class="product-card-svg-container">
                    <svg class="product-card-svg" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="50" fill="var(--accent-color)" opacity="0.1"></circle>
                    </svg>
                </div>
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}" style="width: 100%; height: auto; max-width: 300px; display: block; margin: 0 auto;">
                </div>
                <div class="product-name">${product.name}</div>
                <div class="product-price">$${product.price.toFixed(2)}</div>
                <div class="product-card-actions">
                    <button class="add-to-cart" onclick="addToCart(${product.id})">
                        Agregar al Carrito
                    </button>
                    <button class="generate-description-btn" onclick="generateProductDescription(${product.id})">
                        Generar Descripci√≥n ‚ú®
                    </button>
                </div>
            `;
            grid.appendChild(productCard);
        });
    }

    // Funci√≥n para filtrar productos por categor√≠a y desplazar la vista
    function filterProducts(event, category) {
        currentFilter = category;
        
        // Actualizar botones activos de filtros (secci√≥n principal)
        document.querySelectorAll('.filters .filter-btn').forEach(btn => {
            if (btn.dataset.category === category) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Actualizar botones activos de navegaci√≥n
        document.querySelectorAll('.nav-menu .nav-item').forEach(item => {
            if (item.dataset.category === category) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
        
        // Filtra los productos seg√∫n la categor√≠a seleccionada
        const productsToDisplay = category === 'all'
            ? products
            : products.filter(product => product.category === category);
        
        renderProducts(productsToDisplay); // Renderiza los productos filtrados

        // Desplazamiento suave a la secci√≥n de productos
        document.getElementById('productos').scrollIntoView({ behavior: 'smooth' });
    }

    // Funci√≥n para agregar un producto al carrito
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return; // Si el producto no existe, no hacer nada

        const existingItem = cart.find(item => item.id === productId);
        
        if (existingItem) {
            existingItem.quantity += 1; // Incrementa la cantidad si ya est√° en el carrito
        } else {
            cart.push({ ...product, quantity: 1 }); // A√±ade el producto con cantidad 1
        }
        
        updateCartUI(); // Actualiza la interfaz del carrito
        showNotification(`"${product.name}" agregado al carrito`); // Muestra notificaci√≥n
    }

    // Funci√≥n para actualizar la interfaz del carrito (contador, lista de items, total)
    function updateCartUI() {
        const cartCount = document.getElementById('cart-count');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotalElement = document.getElementById('cart-total');
        
        // Calcula el n√∫mero total de √≠tems en el carrito
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
        
        // Limpia la lista de √≠tems del carrito antes de volver a renderizar
        cartItemsContainer.innerHTML = '';
        let total = 0;
        
        // Recorre el carrito y crea los elementos HTML para cada √≠tem
        if (cart.length === 0) {
            cartItemsContainer.innerHTML = '<p style="text-align: center; color: var(--dark-gray);">El carrito est√° vac√≠o.</p>';
        } else {
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div>
                        <strong>${item.name}</strong><br>
                        $${item.price.toFixed(2)} x ${item.quantity}
                    </div>
                    <div>
                        <button onclick="removeFromCart(${item.id})">
                            Eliminar
                        </button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
                total += item.price * item.quantity; // Suma al total
            });
        }
        
        // Actualiza el total del carrito
        cartTotalElement.textContent = `Total: $${total.toFixed(2)}`;
    }

    // Funci√≥n para eliminar un producto del carrito
    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId); // Filtra para eliminar el producto
        updateCartUI(); // Actualiza la interfaz
        showNotification('Producto eliminado del carrito'); // Muestra notificaci√≥n
    }
        // Funci√≥n para mostrar/ocultar el modal del carrito
        function toggleCart() {
            const cartModal = document.getElementById('cart-modal');
            cartModal.style.display = cartModal.style.display === 'flex' ? 'none' : 'flex'; // Usa 'flex' para centrar
            if (cartModal.style.display === 'flex') {
                updateCartUI(); // Asegura que el carrito est√© actualizado al abrirlo
            }
        }

        // Funci√≥n para finalizar la compra (simulada)
        function checkout() {
            if (cart.length === 0) {
                showCustomAlert('El carrito est√° vac√≠o. Agrega productos antes de finalizar la compra.');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            showCustomAlert(`Compra realizada por $${total.toFixed(2)}. ¬°Gracias por tu compra!`);
            
            // Limpiar carrito despu√©s de la compra
            cart = [];
            updateCartUI();
            toggleCart(); // Cierra el modal del carrito
        }

        // Funci√≥n para mostrar notificaciones temporales
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Elimina la notificaci√≥n despu√©s de 3 segundos
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Funci√≥n de b√∫squeda de productos
        function searchProducts() {
            const searchInput = document.getElementById('search-input');
            currentSearchTerm = searchInput.value.toLowerCase(); // Obtiene el t√©rmino de b√∫squeda

            // Filtra los productos basados en el t√©rmino de b√∫squeda y la categor√≠a actual
            const productsToSearch = currentFilter === 'all'
                ? products
                : products.filter(product => product.category === currentFilter);

            const filteredBySearch = productsToSearch.filter(product =>
                product.name.toLowerCase().includes(currentSearchTerm)
            );
            
            renderProducts(filteredBySearch); // Renderiza los productos encontrados
        }

        // Listener para la tecla Enter en el input de b√∫squeda
        document.getElementById('search-input').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                searchProducts();
            }
        });

        // Custom Alert Modal Functions (replacing window.alert)
        function showCustomAlert(message) {
            document.getElementById('custom-alert-message').textContent = message;
            document.getElementById('custom-alert-modal').style.display = 'flex';
        }

        function closeCustomAlert() {
            document.getElementById('custom-alert-modal').style.display = 'none';
        }

        // --- Funcionalidad de Generaci√≥n de Descripci√≥n con Gemini API ---

        // Funci√≥n para generar la descripci√≥n de un producto usando Gemini API
        async function generateProductDescription(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showCustomAlert('Producto no encontrado para generar descripci√≥n.');
                return;
            }

            const descriptionModal = document.getElementById('description-modal');
            const descriptionProductName = document.getElementById('description-product-name');
            const productDescriptionText = document.getElementById('product-description-text');
            const loadingSpinner = document.getElementById('description-loading-spinner');

            // Muestra el modal y el spinner de carga
            descriptionProductName.textContent = `Descripci√≥n para ${product.name}`;
            productDescriptionText.textContent = ''; // Limpia cualquier descripci√≥n anterior
            loadingSpinner.style.display = 'block';
            descriptionModal.style.display = 'flex';

            // Construye el prompt para el LLM
            const prompt = `Genera una descripci√≥n de marketing atractiva y concisa para el siguiente producto de e-commerce. Incluye sus caracter√≠sticas clave y beneficios. El producto es: ${product.name}, Categor√≠a: ${product.category}, Precio: $${product.price}.`;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; // La clave API se proporciona en tiempo de ejecuci√≥n por Canvas
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    productDescriptionText.textContent = text; // Muestra la descripci√≥n generada
                } else {
                    productDescriptionText.textContent = 'No se pudo generar una descripci√≥n. Int√©ntalo de nuevo.';
                    console.error('Error en la estructura de la respuesta de Gemini API:', result);
                }
            } catch (error) {
                productDescriptionText.textContent = 'Error al conectar con el servicio de generaci√≥n de descripciones.';
                console.error('Error al llamar a Gemini API:', error);
            } finally {
                loadingSpinner.style.display = 'none'; // Oculta el spinner de carga
            }
        }

        // Funci√≥n para cerrar el modal de descripci√≥n
        function closeDescriptionModal() {
            document.getElementById('description-modal').style.display = 'none';
        }

        // Inicializaci√≥n: Renderiza todos los productos al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            updateCartUI(); // Asegura que el contador del carrito se inicialice
        });
    </script>
</body>
</html>
